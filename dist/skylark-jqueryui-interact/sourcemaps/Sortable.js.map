{"version":3,"sources":["Sortable.js"],"names":["define","langx","datax","eventer","noder","$","plugins","Mouse","ddmanager","Sortable","inherit","klassName","pluginName","widgetEventPrefix","ready","options","appendTo","axis","connectWith","containment","cursor","cursorAt","dropOnEmpty","forcePlaceholderSize","forceHelperSize","grid","handle","helper","items","opacity","placeholder","revert","scroll","scrollSensitivity","scrollSpeed","scope","tolerance","zIndex","activate","beforeStop","change","deactivate","out","over","receive","remove","sort","start","stop","update","_isOverAxis","x","reference","size","_isFloating","item","test","css","_create","this","containerCache","_addClass","refresh","offset","element","_mouseInit","_setHandleClassName","_setOption","key","value","_super","that","_removeClass","find","each","instance","_destroy","_mouseDestroy","i","length","removeData","_mouseCapture","event","overrideHandle","currentItem","validHandle","reverting","disabled","type","_refreshItems","target","parents","data","addBack","_removeCurrentsFromItems","_mouseStart","noActivation","body","o","currentContainer","refreshPositions","parent","_createHelper","_cacheHelperProportions","_cacheMargins","top","margins","left","extend","click","pageX","pageY","relative","_getRelativeOffset","cssPosition","_adjustOffsetFromHelper","domPosition","prev","hide","_createPlaceholder","scrollParent","_getParentOffset","_setContainment","document","storedCursor","storedStylesheet","_storedZIndex","_storedOpacity","tagName","overflowOffset","_trigger","_uiHash","_preserveHelperProportions","containers","current","dropBehaviour","prepareOffsets","dragging","is","detach","position","originalPosition","_generatePosition","originalPageX","originalPageY","lastPositionAbs","positionAbs","_convertPositionTo","_mouseDrag","_scroll","scrolled","offsetHeight","scrollTop","offsetWidth","scrollLeft","window","height","width","itemElement","intersection","style","_contactContainers","innermostContainer","_refreshItemPositions","dragDirection","vertical","_getDragVerticalDirection","horizontal","_getDragHorizontalDirection","_intersectsWithPointer","contains","direction","_intersectsWithSides","_rearrange","drag","_mouseStop","noPropagation","cur","animation","drop","offsetParent","animate","parseInt","_clear","cancel","_mouseUp","create","_storedCSS","show","parentNode","removeChild","_noFinalSort","after","prepend","serialize","_getItemsAsjQuery","connected","str","res","attr","attribute","match","expression","push","join","toArray","ret","_intersectsWith","x1","x2","helperProportions","y1","y2","l","r","t","b","dyClick","dxClick","isOverElementHeight","isOverElementWidth","forcePointerForContainers","floating","verticalDirection","horizontalDirection","isOverBottomHalf","isOverRightHalf","delta","_connectWith","constructor","String","j","inst","queries","isFunction","call","not","addItems","list","filter","targetData","_queries","queriesLength","fast","p","toleranceElement","outerWidth","outerHeight","custom","refreshContainers","className","nodeName","toLowerCase","_createTrPlaceholder","eq","container","innerHeight","innerWidth","sourceTr","targetTr","children","dist","itemWithLeastDistance","posProperty","sizeProperty","nearBottom","innermostIndex","Math","abs","apply","clone","appendChild","obj","split","isArray","right","bottom","po","ui","ie","ce","scrollHeight","co","max","scrollWidth","d","pos","mod","scrollIsRootNode","round","a","hardRefresh","insertBefore","nextSibling","counter","_delay","delayedTriggers","before","delayEvent","fromOutside","c","cancelHelperRemoval","overrided","_inst","sender","register"],"mappings":"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","file":"../Sortable.js","sourcesContent":["define( [\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-domx-data\",\r\n\t\"skylark-domx-eventer\",\r\n\t\"skylark-domx-noder\",\r\n\t\"skylark-domx-query\",\r\n\t\"skylark-domx-plugins-base\",\r\n\t\"./Mouse\",\r\n\t\"./ddmanager\",\r\n],function(langx, datax, eventer, noder, $, plugins, Mouse, ddmanager) {\r\n\r\n\tvar Sortable = Mouse.inherit({\r\n\t\tklassName: \"Sortable\",\r\n\r\n\t\tpluginName : \"ui.sortable\",\r\n\r\n\t\twidgetEventPrefix: \"sort\",\r\n\t\tready: false,\r\n\t\toptions: {\r\n\t\t\tappendTo: \"parent\",\r\n\t\t\taxis: false,\r\n\t\t\tconnectWith: false,\r\n\t\t\tcontainment: false,\r\n\t\t\tcursor: \"auto\",\r\n\t\t\tcursorAt: false,\r\n\t\t\tdropOnEmpty: true,\r\n\t\t\tforcePlaceholderSize: false,\r\n\t\t\tforceHelperSize: false,\r\n\t\t\tgrid: false,\r\n\t\t\thandle: false,\r\n\t\t\thelper: \"original\",\r\n\t\t\titems: \"> *\",\r\n\t\t\topacity: false,\r\n\t\t\tplaceholder: false,\r\n\t\t\trevert: false,\r\n\t\t\tscroll: true,\r\n\t\t\tscrollSensitivity: 20,\r\n\t\t\tscrollSpeed: 20,\r\n\t\t\tscope: \"default\",\r\n\t\t\ttolerance: \"intersect\",\r\n\t\t\tzIndex: 1000,\r\n\r\n\t\t\t// Callbacks\r\n\t\t\tactivate: null,\r\n\t\t\tbeforeStop: null,\r\n\t\t\tchange: null,\r\n\t\t\tdeactivate: null,\r\n\t\t\tout: null,\r\n\t\t\tover: null,\r\n\t\t\treceive: null,\r\n\t\t\tremove: null,\r\n\t\t\tsort: null,\r\n\t\t\tstart: null,\r\n\t\t\tstop: null,\r\n\t\t\tupdate: null\r\n\t\t},\r\n\r\n\t\t_isOverAxis: function( x, reference, size ) {\r\n\t\t\treturn ( x >= reference ) && ( x < ( reference + size ) );\r\n\t\t},\r\n\r\n\t\t_isFloating: function( item ) {\r\n\t\t\treturn ( /left|right/ ).test( item.css( \"float\" ) ) ||\r\n\t\t\t\t( /inline|table-cell/ ).test( item.css( \"display\" ) );\r\n\t\t},\r\n\r\n\t\t_create: function() {\r\n\t\t\tthis.containerCache = {};\r\n\t\t\tthis._addClass( \"ui-sortable\" );\r\n\r\n\t\t\t//Get the items\r\n\t\t\tthis.refresh();\r\n\r\n\t\t\t//Let's determine the parent's offset\r\n\t\t\tthis.offset = this.element.offset();\r\n\r\n\t\t\t//Initialize mouse events for interaction\r\n\t\t\tthis._mouseInit();\r\n\r\n\t\t\tthis._setHandleClassName();\r\n\r\n\t\t\t//We're ready to go\r\n\t\t\tthis.ready = true;\r\n\r\n\t\t},\r\n\r\n\t\t_setOption: function( key, value ) {\r\n\t\t\tthis._super( key, value );\r\n\r\n\t\t\tif ( key === \"handle\" ) {\r\n\t\t\t\tthis._setHandleClassName();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setHandleClassName: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tthis._removeClass( this.element.find( \".ui-sortable-handle\" ), \"ui-sortable-handle\" );\r\n\t\t\tlangx.each( this.items, function() {\r\n\t\t\t\tthat._addClass(\r\n\t\t\t\t\tthis.instance.options.handle ?\r\n\t\t\t\t\t\tthis.item.find( this.instance.options.handle ) :\r\n\t\t\t\t\t\tthis.item,\r\n\t\t\t\t\t\"ui-sortable-handle\"\r\n\t\t\t\t);\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t_destroy: function() {\r\n\t\t\tthis._mouseDestroy();\r\n\r\n\t\t\tfor ( var i = this.items.length - 1; i >= 0; i-- ) {\r\n\t\t\t\tthis.items[ i ].item.removeData( this.pluginName + \"-item\" );\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t_mouseCapture: function( event, overrideHandle ) {\r\n\t\t\tvar currentItem = null,\r\n\t\t\t\tvalidHandle = false,\r\n\t\t\t\tthat = this;\r\n\r\n\t\t\tif ( this.reverting ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.options.disabled || this.options.type === \"static\" ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t//We have to refresh the items data once first\r\n\t\t\tthis._refreshItems( event );\r\n\r\n\t\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\r\n\t\t\t$( event.target ).parents().each( function() {\r\n\t\t\t\tif ( datax.data( this, that.pluginName + \"-item\" ) === that ) {\r\n\t\t\t\t\tcurrentItem = $( this );\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tif ( datax.data( event.target, that.pluginName + \"-item\" ) === that ) {\r\n\t\t\t\tcurrentItem = $( event.target );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !currentItem ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif ( this.options.handle && !overrideHandle ) {\r\n\t\t\t\t$( this.options.handle, currentItem ).find( \"*\" ).addBack().each( function() {\r\n\t\t\t\t\tif ( this === event.target ) {\r\n\t\t\t\t\t\tvalidHandle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t\tif ( !validHandle ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.currentItem = currentItem;\r\n\t\t\tthis._removeCurrentsFromItems();\r\n\t\t\treturn true;\r\n\r\n\t\t},\r\n\r\n\t\t_mouseStart: function( event, overrideHandle, noActivation ) {\r\n\r\n\t\t\tvar i, body,\r\n\t\t\t\to = this.options;\r\n\r\n\t\t\tthis.currentContainer = this;\r\n\r\n\t\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to\r\n\t\t\t// mouseCapture\r\n\t\t\tthis.refreshPositions();\r\n\r\n\t\t\t//Prepare the dragged items parent\r\n\t\t\tthis.appendTo = $( o.appendTo !== \"parent\" ?\r\n\t\t\t\t\to.appendTo :\r\n\t\t\t\t\tthis.currentItem.parent() );\r\n\r\n\t\t\t//Create and append the visible helper\r\n\t\t\tthis.helper = this._createHelper( event );\r\n\r\n\t\t\t//Cache the helper size\r\n\t\t\tthis._cacheHelperProportions();\r\n\r\n\t\t\t/*\r\n\t\t\t * - Position generation -\r\n\t\t\t * This block generates everything position related - it's the core of draggables.\r\n\t\t\t */\r\n\r\n\t\t\t//Cache the margins of the original element\r\n\t\t\tthis._cacheMargins();\r\n\r\n\t\t\t//The element's absolute position on the page minus margins\r\n\t\t\tthis.offset = this.currentItem.offset();\r\n\t\t\tthis.offset = {\r\n\t\t\t\ttop: this.offset.top - this.margins.top,\r\n\t\t\t\tleft: this.offset.left - this.margins.left\r\n\t\t\t};\r\n\r\n\t\t\tlangx.extend( this.offset, {\r\n\t\t\t\tclick: { //Where the click happened, relative to the element\r\n\t\t\t\t\tleft: event.pageX - this.offset.left,\r\n\t\t\t\t\ttop: event.pageY - this.offset.top\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// This is a relative to absolute position minus the actual position calculation -\r\n\t\t\t\t// only used for relative positioned helper\r\n\t\t\t\trelative: this._getRelativeOffset()\r\n\t\t\t} );\r\n\r\n\t\t\t// After we get the helper offset, but before we get the parent offset we can\r\n\t\t\t// change the helper's position to absolute\r\n\t\t\t// TODO: Still need to figure out a way to make relative sorting possible\r\n\t\t\tthis.helper.css( \"position\", \"absolute\" );\r\n\t\t\tthis.cssPosition = this.helper.css( \"position\" );\r\n\r\n\t\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\r\n\t\t\t( o.cursorAt && this._adjustOffsetFromHelper( o.cursorAt ) );\r\n\r\n\t\t\t//Cache the former DOM position\r\n\t\t\tthis.domPosition = {\r\n\t\t\t\tprev: this.currentItem.prev()[ 0 ],\r\n\t\t\t\tparent: this.currentItem.parent()[ 0 ]\r\n\t\t\t};\r\n\r\n\t\t\t// If the helper is not the original, hide the original so it's not playing any role during\r\n\t\t\t// the drag, won't cause anything bad this way\r\n\t\t\tif ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {\r\n\t\t\t\tthis.currentItem.hide();\r\n\t\t\t}\r\n\r\n\t\t\t//Create the placeholder\r\n\t\t\tthis._createPlaceholder();\r\n\r\n\t\t\t//Get the next scrolling parent\r\n\t\t\tthis.scrollParent = this.placeholder.scrollParent();\r\n\r\n\t\t\tlangx.extend( this.offset, {\r\n\t\t\t\tparent: this._getParentOffset()\r\n\t\t\t} );\r\n\r\n\t\t\t//Set a containment if given in the options\r\n\t\t\tif ( o.containment ) {\r\n\t\t\t\tthis._setContainment();\r\n\t\t\t}\r\n\r\n\t\t\tif ( o.cursor && o.cursor !== \"auto\" ) { // cursor option\r\n\t\t\t\tbody = this.document.find( \"body\" );\r\n\r\n\t\t\t\t// Support: IE\r\n\t\t\t\tthis.storedCursor = body.css( \"cursor\" );\r\n\t\t\t\tbody.css( \"cursor\", o.cursor );\r\n\r\n\t\t\t\tthis.storedStylesheet =\r\n\t\t\t\t\t$( \"<style>*{ cursor: \" + o.cursor + \" !important; }</style>\" ).appendTo( body );\r\n\t\t\t}\r\n\r\n\t\t\t// We need to make sure to grab the zIndex before setting the\r\n\t\t\t// opacity, because setting the opacity to anything lower than 1\r\n\t\t\t// causes the zIndex to change from \"auto\" to 0.\r\n\t\t\tif ( o.zIndex ) { // zIndex option\r\n\t\t\t\tif ( this.helper.css( \"zIndex\" ) ) {\r\n\t\t\t\t\tthis._storedZIndex = this.helper.css( \"zIndex\" );\r\n\t\t\t\t}\r\n\t\t\t\tthis.helper.css( \"zIndex\", o.zIndex );\r\n\t\t\t}\r\n\r\n\t\t\tif ( o.opacity ) { // opacity option\r\n\t\t\t\tif ( this.helper.css( \"opacity\" ) ) {\r\n\t\t\t\t\tthis._storedOpacity = this.helper.css( \"opacity\" );\r\n\t\t\t\t}\r\n\t\t\t\tthis.helper.css( \"opacity\", o.opacity );\r\n\t\t\t}\r\n\r\n\t\t\t//Prepare scrolling\r\n\t\t\tif ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\r\n\t\t\t\t\tthis.scrollParent[ 0 ].tagName !== \"HTML\" ) {\r\n\t\t\t\tthis.overflowOffset = this.scrollParent.offset();\r\n\t\t\t}\r\n\r\n\t\t\t//Call callbacks\r\n\t\t\tthis._trigger( \"start\", event, this._uiHash() );\r\n\r\n\t\t\t//Recache the helper size\r\n\t\t\tif ( !this._preserveHelperProportions ) {\r\n\t\t\t\tthis._cacheHelperProportions();\r\n\t\t\t}\r\n\r\n\t\t\t//Post \"activate\" events to possible containers\r\n\t\t\tif ( !noActivation ) {\r\n\t\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\tthis.containers[ i ]._trigger( \"activate\", event, this._uiHash( this ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Prepare possible droppables\r\n\t\t\tif ( ddmanager ) {\r\n\t\t\t\tddmanager.current = this;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ddmanager && !o.dropBehaviour ) {\r\n\t\t\t\tddmanager.prepareOffsets( this, event );\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragging = true;\r\n\r\n\t\t\tthis._addClass( this.helper, \"ui-sortable-helper\" );\r\n\r\n\t\t\t//Move the helper, if needed\r\n\t\t\tif ( !this.helper.parent().is( this.appendTo ) ) {\r\n\t\t\t\tthis.helper.detach().appendTo( this.appendTo );\r\n\r\n\t\t\t\t//Update position\r\n\t\t\t\tthis.offset.parent = this._getParentOffset();\r\n\t\t\t}\r\n\r\n\t\t\t//Generate the original position\r\n\t\t\tthis.position = this.originalPosition = this._generatePosition( event );\r\n\t\t\tthis.originalPageX = event.pageX;\r\n\t\t\tthis.originalPageY = event.pageY;\r\n\t\t\tthis.lastPositionAbs = this.positionAbs = this._convertPositionTo( \"absolute\" );\r\n\r\n\t\t\tthis._mouseDrag( event );\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t},\r\n\r\n\t\t_scroll: function( event ) {\r\n\t\t\tvar o = this.options,\r\n\t\t\t\tscrolled = false;\r\n\r\n\t\t\tif ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\r\n\t\t\t\t\tthis.scrollParent[ 0 ].tagName !== \"HTML\" ) {\r\n\r\n\t\t\t\tif ( ( this.overflowOffset.top + this.scrollParent[ 0 ].offsetHeight ) -\r\n\t\t\t\t\t\tevent.pageY < o.scrollSensitivity ) {\r\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollTop =\r\n\t\t\t\t\t\tscrolled = this.scrollParent[ 0 ].scrollTop + o.scrollSpeed;\r\n\t\t\t\t} else if ( event.pageY - this.overflowOffset.top < o.scrollSensitivity ) {\r\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollTop =\r\n\t\t\t\t\t\tscrolled = this.scrollParent[ 0 ].scrollTop - o.scrollSpeed;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ( this.overflowOffset.left + this.scrollParent[ 0 ].offsetWidth ) -\r\n\t\t\t\t\t\tevent.pageX < o.scrollSensitivity ) {\r\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft = scrolled =\r\n\t\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft + o.scrollSpeed;\r\n\t\t\t\t} else if ( event.pageX - this.overflowOffset.left < o.scrollSensitivity ) {\r\n\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft = scrolled =\r\n\t\t\t\t\t\tthis.scrollParent[ 0 ].scrollLeft - o.scrollSpeed;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( event.pageY - this.document.scrollTop() < o.scrollSensitivity ) {\r\n\t\t\t\t\tscrolled = this.document.scrollTop( this.document.scrollTop() - o.scrollSpeed );\r\n\t\t\t\t} else if ( this.window.height() - ( event.pageY - this.document.scrollTop() ) <\r\n\t\t\t\t\t\to.scrollSensitivity ) {\r\n\t\t\t\t\tscrolled = this.document.scrollTop( this.document.scrollTop() + o.scrollSpeed );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( event.pageX - this.document.scrollLeft() < o.scrollSensitivity ) {\r\n\t\t\t\t\tscrolled = this.document.scrollLeft(\r\n\t\t\t\t\t\tthis.document.scrollLeft() - o.scrollSpeed\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if ( this.window.width() - ( event.pageX - this.document.scrollLeft() ) <\r\n\t\t\t\t\t\to.scrollSensitivity ) {\r\n\t\t\t\t\tscrolled = this.document.scrollLeft(\r\n\t\t\t\t\t\tthis.document.scrollLeft() + o.scrollSpeed\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn scrolled;\r\n\t\t},\r\n\r\n\t\t_mouseDrag: function( event ) {\r\n\t\t\tvar i, item, itemElement, intersection,\r\n\t\t\t\to = this.options;\r\n\r\n\t\t\t//Compute the helpers position\r\n\t\t\tthis.position = this._generatePosition( event );\r\n\t\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\r\n\r\n\t\t\t//Set the helper position\r\n\t\t\tif ( !this.options.axis || this.options.axis !== \"y\" ) {\r\n\t\t\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\r\n\t\t\t}\r\n\t\t\tif ( !this.options.axis || this.options.axis !== \"x\" ) {\r\n\t\t\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\r\n\t\t\t}\r\n\r\n\t\t\t//Post events to containers\r\n\t\t\tthis._contactContainers( event );\r\n\r\n\t\t\tif ( this.innermostContainer !== null ) {\r\n\r\n\t\t\t\t//Do scrolling\r\n\t\t\t\tif ( o.scroll ) {\r\n\t\t\t\t\tif ( this._scroll( event ) !== false ) {\r\n\r\n\t\t\t\t\t\t//Update item positions used in position checks\r\n\t\t\t\t\t\tthis._refreshItemPositions( true );\r\n\r\n\t\t\t\t\t\tif ( ddmanager && !o.dropBehaviour ) {\r\n\t\t\t\t\t\t\tddmanager.prepareOffsets( this, event );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.dragDirection = {\r\n\t\t\t\t\tvertical: this._getDragVerticalDirection(),\r\n\t\t\t\t\thorizontal: this._getDragHorizontalDirection()\r\n\t\t\t\t};\r\n\r\n\t\t\t\t//Rearrange\r\n\t\t\t\tfor ( i = this.items.length - 1; i >= 0; i-- ) {\r\n\r\n\t\t\t\t\t//Cache variables and intersection, continue if no intersection\r\n\t\t\t\t\titem = this.items[ i ];\r\n\t\t\t\t\titemElement = item.item[ 0 ];\r\n\t\t\t\t\tintersection = this._intersectsWithPointer( item );\r\n\t\t\t\t\tif ( !intersection ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Only put the placeholder inside the current Container, skip all\r\n\t\t\t\t\t// items from other containers. This works because when moving\r\n\t\t\t\t\t// an item from one container to another the\r\n\t\t\t\t\t// currentContainer is switched before the placeholder is moved.\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// Without this, moving items in \"sub-sortables\" can cause\r\n\t\t\t\t\t// the placeholder to jitter between the outer and inner container.\r\n\t\t\t\t\tif ( item.instance !== this.currentContainer ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Cannot intersect with itself\r\n\t\t\t\t\t// no useless actions that have been done before\r\n\t\t\t\t\t// no action if the item moved is the parent of the item checked\r\n\t\t\t\t\tif ( itemElement !== this.currentItem[ 0 ] &&\r\n\t\t\t\t\t\tthis.placeholder[ intersection === 1 ?\r\n\t\t\t\t\t\t\"next\" : \"prev\" ]()[ 0 ] !== itemElement &&\r\n\t\t\t\t\t\t!noder.contains( this.placeholder[ 0 ], itemElement ) &&\r\n\t\t\t\t\t\t( this.options.type === \"semi-dynamic\" ?\r\n\t\t\t\t\t\t\t!noder.contains( this.element[ 0 ], itemElement ) :\r\n\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\tthis.direction = intersection === 1 ? \"down\" : \"up\";\r\n\r\n\t\t\t\t\t\tif ( this.options.tolerance === \"pointer\" ||\r\n\t\t\t\t\t\t\t\tthis._intersectsWithSides( item ) ) {\r\n\t\t\t\t\t\t\tthis._rearrange( event, item );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._trigger( \"change\", event, this._uiHash() );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Interconnect with droppables\r\n\t\t\tif ( ddmanager ) {\r\n\t\t\t\tddmanager.drag( this, event );\r\n\t\t\t}\r\n\r\n\t\t\t//Call callbacks\r\n\t\t\tthis._trigger( \"sort\", event, this._uiHash() );\r\n\r\n\t\t\tthis.lastPositionAbs = this.positionAbs;\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\r\n\t\t_mouseStop: function( event, noPropagation ) {\r\n\r\n\t\t\tif ( !event ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//If we are using droppables, inform the manager about the drop\r\n\t\t\tif ( ddmanager && !this.options.dropBehaviour ) {\r\n\t\t\t\tddmanager.drop( this, event );\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.options.revert ) {\r\n\t\t\t\tvar that = this,\r\n\t\t\t\t\tcur = this.placeholder.offset(),\r\n\t\t\t\t\taxis = this.options.axis,\r\n\t\t\t\t\tanimation = {};\r\n\r\n\t\t\t\tif ( !axis || axis === \"x\" ) {\r\n\t\t\t\t\tanimation.left = cur.left - this.offset.parent.left - this.margins.left +\r\n\t\t\t\t\t\t( this.offsetParent[ 0 ] === this.document[ 0 ].body ?\r\n\t\t\t\t\t\t\t0 :\r\n\t\t\t\t\t\t\tthis.offsetParent[ 0 ].scrollLeft\r\n\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif ( !axis || axis === \"y\" ) {\r\n\t\t\t\t\tanimation.top = cur.top - this.offset.parent.top - this.margins.top +\r\n\t\t\t\t\t\t( this.offsetParent[ 0 ] === this.document[ 0 ].body ?\r\n\t\t\t\t\t\t\t0 :\r\n\t\t\t\t\t\t\tthis.offsetParent[ 0 ].scrollTop\r\n\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tthis.reverting = true;\r\n\t\t\t\t$( this.helper ).animate(\r\n\t\t\t\t\tanimation,\r\n\t\t\t\t\tparseInt( this.options.revert, 10 ) || 500,\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tthat._clear( event );\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis._clear( event, noPropagation );\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t},\r\n\r\n\t\tcancel: function() {\r\n\r\n\t\t\tif ( this.dragging ) {\r\n\r\n\t\t\t\tthis._mouseUp( new eventer.create( \"mouseup\", { target: null }));\r\n\r\n\t\t\t\tif ( this.options.helper === \"original\" ) {\r\n\t\t\t\t\tthis.currentItem.css( this._storedCSS );\r\n\t\t\t\t\tthis._removeClass( this.currentItem, \"ui-sortable-helper\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentItem.show();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Post deactivating events to containers\r\n\t\t\t\tfor ( var i = this.containers.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\tthis.containers[ i ]._trigger( \"deactivate\", null, this._uiHash( this ) );\r\n\t\t\t\t\tif ( this.containers[ i ].containerCache.over ) {\r\n\t\t\t\t\t\tthis.containers[ i ]._trigger( \"out\", null, this._uiHash( this ) );\r\n\t\t\t\t\t\tthis.containers[ i ].containerCache.over = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.placeholder ) {\r\n\r\n\t\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately,\r\n\t\t\t\t// it unbinds ALL events from the original node!\r\n\t\t\t\tif ( this.placeholder[ 0 ].parentNode ) {\r\n\t\t\t\t\tthis.placeholder[ 0 ].parentNode.removeChild( this.placeholder[ 0 ] );\r\n\t\t\t\t}\r\n\t\t\t\tif ( this.options.helper !== \"original\" && this.helper &&\r\n\t\t\t\t\t\tthis.helper[ 0 ].parentNode ) {\r\n\t\t\t\t\tthis.helper.remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlangx.extend( this, {\r\n\t\t\t\t\thelper: null,\r\n\t\t\t\t\tdragging: false,\r\n\t\t\t\t\treverting: false,\r\n\t\t\t\t\t_noFinalSort: null\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tif ( this.domPosition.prev ) {\r\n\t\t\t\t\t$( this.domPosition.prev ).after( this.currentItem );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$( this.domPosition.parent ).prepend( this.currentItem );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tserialize: function( o ) {\r\n\r\n\t\t\tvar items = this._getItemsAsjQuery( o && o.connected ),\r\n\t\t\t\tstr = [];\r\n\t\t\to = o || {};\r\n\r\n\t\t\t$( items ).each( function() {\r\n\t\t\t\tvar res = ( $( o.item || this ).attr( o.attribute || \"id\" ) || \"\" )\r\n\t\t\t\t\t.match( o.expression || ( /(.+)[\\-=_](.+)/ ) );\r\n\t\t\t\tif ( res ) {\r\n\t\t\t\t\tstr.push(\r\n\t\t\t\t\t\t( o.key || res[ 1 ] + \"[]\" ) +\r\n\t\t\t\t\t\t\"=\" + ( o.key && o.expression ? res[ 1 ] : res[ 2 ] ) );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\tif ( !str.length && o.key ) {\r\n\t\t\t\tstr.push( o.key + \"=\" );\r\n\t\t\t}\r\n\r\n\t\t\treturn str.join( \"&\" );\r\n\r\n\t\t},\r\n\r\n\t\ttoArray: function( o ) {\r\n\r\n\t\t\tvar items = this._getItemsAsjQuery( o && o.connected ),\r\n\t\t\t\tret = [];\r\n\r\n\t\t\to = o || {};\r\n\r\n\t\t\titems.each( function() {\r\n\t\t\t\tret.push( $( o.item || this ).attr( o.attribute || \"id\" ) || \"\" );\r\n\t\t\t} );\r\n\t\t\treturn ret;\r\n\r\n\t\t},\r\n\r\n\t\t/* Be careful with the following core functions */\r\n\t\t_intersectsWith: function( item ) {\r\n\r\n\t\t\tvar x1 = this.positionAbs.left,\r\n\t\t\t\tx2 = x1 + this.helperProportions.width,\r\n\t\t\t\ty1 = this.positionAbs.top,\r\n\t\t\t\ty2 = y1 + this.helperProportions.height,\r\n\t\t\t\tl = item.left,\r\n\t\t\t\tr = l + item.width,\r\n\t\t\t\tt = item.top,\r\n\t\t\t\tb = t + item.height,\r\n\t\t\t\tdyClick = this.offset.click.top,\r\n\t\t\t\tdxClick = this.offset.click.left,\r\n\t\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) || ( ( y1 + dyClick ) > t &&\r\n\t\t\t\t\t( y1 + dyClick ) < b ),\r\n\t\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) || ( ( x1 + dxClick ) > l &&\r\n\t\t\t\t\t( x1 + dxClick ) < r ),\r\n\t\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\r\n\r\n\t\t\tif ( this.options.tolerance === \"pointer\" ||\r\n\t\t\t\tthis.options.forcePointerForContainers ||\r\n\t\t\t\t( this.options.tolerance !== \"pointer\" &&\r\n\t\t\t\t\tthis.helperProportions[ this.floating ? \"width\" : \"height\" ] >\r\n\t\t\t\t\titem[ this.floating ? \"width\" : \"height\" ] )\r\n\t\t\t) {\r\n\t\t\t\treturn isOverElement;\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn ( l < x1 + ( this.helperProportions.width / 2 ) && // Right Half\r\n\t\t\t\t\tx2 - ( this.helperProportions.width / 2 ) < r && // Left Half\r\n\t\t\t\t\tt < y1 + ( this.helperProportions.height / 2 ) && // Bottom Half\r\n\t\t\t\t\ty2 - ( this.helperProportions.height / 2 ) < b ); // Top Half\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_intersectsWithPointer: function( item ) {\r\n\t\t\tvar verticalDirection, horizontalDirection,\r\n\t\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) ||\r\n\t\t\t\t\tthis._isOverAxis(\r\n\t\t\t\t\t\tthis.positionAbs.top + this.offset.click.top, item.top, item.height ),\r\n\t\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) ||\r\n\t\t\t\t\tthis._isOverAxis(\r\n\t\t\t\t\t\tthis.positionAbs.left + this.offset.click.left, item.left, item.width ),\r\n\t\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\r\n\r\n\t\t\tif ( !isOverElement ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tverticalDirection = this.dragDirection.vertical;\r\n\t\t\thorizontalDirection = this.dragDirection.horizontal;\r\n\r\n\t\t\treturn this.floating ?\r\n\t\t\t\t( ( horizontalDirection === \"right\" || verticalDirection === \"down\" ) ? 2 : 1 )\r\n\t\t\t\t: ( verticalDirection && ( verticalDirection === \"down\" ? 2 : 1 ) );\r\n\r\n\t\t},\r\n\r\n\t\t_intersectsWithSides: function( item ) {\r\n\r\n\t\t\tvar isOverBottomHalf = this._isOverAxis( this.positionAbs.top +\r\n\t\t\t\t\tthis.offset.click.top, item.top + ( item.height / 2 ), item.height ),\r\n\t\t\t\tisOverRightHalf = this._isOverAxis( this.positionAbs.left +\r\n\t\t\t\t\tthis.offset.click.left, item.left + ( item.width / 2 ), item.width ),\r\n\t\t\t\tverticalDirection = this.dragDirection.vertical,\r\n\t\t\t\thorizontalDirection = this.dragDirection.horizontal;\r\n\r\n\t\t\tif ( this.floating && horizontalDirection ) {\r\n\t\t\t\treturn ( ( horizontalDirection === \"right\" && isOverRightHalf ) ||\r\n\t\t\t\t\t( horizontalDirection === \"left\" && !isOverRightHalf ) );\r\n\t\t\t} else {\r\n\t\t\t\treturn verticalDirection && ( ( verticalDirection === \"down\" && isOverBottomHalf ) ||\r\n\t\t\t\t\t( verticalDirection === \"up\" && !isOverBottomHalf ) );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_getDragVerticalDirection: function() {\r\n\t\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\r\n\t\t\treturn delta !== 0 && ( delta > 0 ? \"down\" : \"up\" );\r\n\t\t},\r\n\r\n\t\t_getDragHorizontalDirection: function() {\r\n\t\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\r\n\t\t\treturn delta !== 0 && ( delta > 0 ? \"right\" : \"left\" );\r\n\t\t},\r\n\r\n\t\trefresh: function( event ) {\r\n\t\t\tthis._refreshItems( event );\r\n\t\t\tthis._setHandleClassName();\r\n\t\t\tthis.refreshPositions();\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t_connectWith: function() {\r\n\t\t\tvar options = this.options;\r\n\t\t\treturn options.connectWith.constructor === String ?\r\n\t\t\t\t[ options.connectWith ] :\r\n\t\t\t\toptions.connectWith;\r\n\t\t},\r\n\r\n\t\t_getItemsAsjQuery: function( connected ) {\r\n\r\n\t\t\tvar i, j, cur, inst,\r\n\t\t\t\titems = [],\r\n\t\t\t\tqueries = [],\r\n\t\t\t\tconnectWith = this._connectWith();\r\n\r\n\t\t\tif ( connectWith && connected ) {\r\n\t\t\t\tfor ( i = connectWith.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\tcur = $( connectWith[ i ], this.document[ 0 ] );\r\n\t\t\t\t\tfor ( j = cur.length - 1; j >= 0; j-- ) {\r\n\t\t\t\t\t\tinst = datax.data( cur[ j ], this.pluginName );\r\n\t\t\t\t\t\tif ( inst && inst !== this && !inst.options.disabled ) {\r\n\t\t\t\t\t\t\tqueries.push( [ langx.isFunction( inst.options.items ) ?\r\n\t\t\t\t\t\t\t\tinst.options.items.call( inst.element ) :\r\n\t\t\t\t\t\t\t\t$( inst.options.items, inst.element )\r\n\t\t\t\t\t\t\t\t\t.not( \".ui-sortable-helper\" )\r\n\t\t\t\t\t\t\t\t\t.not( \".ui-sortable-placeholder\" ), inst ] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tqueries.push( [ langx.isFunction( this.options.items ) ?\r\n\t\t\t\tthis.options.items\r\n\t\t\t\t\t.call( this.element, null, { options: this.options, item: this.currentItem } ) :\r\n\t\t\t\t$( this.options.items, this.element )\r\n\t\t\t\t\t.not( \".ui-sortable-helper\" )\r\n\t\t\t\t\t.not( \".ui-sortable-placeholder\" ), this ] );\r\n\r\n\t\t\tfunction addItems() {\r\n\t\t\t\titems.push( this );\r\n\t\t\t}\r\n\t\t\tfor ( i = queries.length - 1; i >= 0; i-- ) {\r\n\t\t\t\tqueries[ i ][ 0 ].each( addItems );\r\n\t\t\t}\r\n\r\n\t\t\treturn $( items );\r\n\r\n\t\t},\r\n\r\n\t\t_removeCurrentsFromItems: function() {\r\n\r\n\t\t\tvar list = this.currentItem.find( \":data(\" + this.pluginName + \"-item)\" );\r\n\r\n\t\t\tthis.items = this.items.filter(function( item ) {\r\n\t\t\t\tfor ( var j = 0; j < list.length; j++ ) {\r\n\t\t\t\t\tif ( list[ j ] === item.item[ 0 ] ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} );\r\n\r\n\t\t},\r\n\r\n\t\t_refreshItems: function( event ) {\r\n\r\n\t\t\tthis.items = [];\r\n\t\t\tthis.containers = [ this ];\r\n\r\n\t\t\tvar i, j, cur, inst, targetData, _queries, item, queriesLength,\r\n\t\t\t\titems = this.items,\r\n\t\t\t\tqueries = [ [ langx.isFunction( this.options.items ) ?\r\n\t\t\t\t\tthis.options.items.call( this.element[ 0 ], event, { item: this.currentItem } ) :\r\n\t\t\t\t\t$( this.options.items, this.element ), this ] ],\r\n\t\t\t\tconnectWith = this._connectWith();\r\n\r\n\t\t\t//Shouldn't be run the first time through due to massive slow-down\r\n\t\t\tif ( connectWith && this.ready ) {\r\n\t\t\t\tfor ( i = connectWith.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\tcur = $( connectWith[ i ], this.document[ 0 ] );\r\n\t\t\t\t\tfor ( j = cur.length - 1; j >= 0; j-- ) {\r\n\t\t\t\t\t\tinst = datax.data( cur[ j ], this.pluginName );\r\n\t\t\t\t\t\tif ( inst && inst !== this && !inst.options.disabled ) {\r\n\t\t\t\t\t\t\tqueries.push( [ langx.isFunction( inst.options.items ) ?\r\n\t\t\t\t\t\t\t\tinst.options.items\r\n\t\t\t\t\t\t\t\t\t.call( inst.element[ 0 ], event, { item: this.currentItem } ) :\r\n\t\t\t\t\t\t\t\t$( inst.options.items, inst.element ), inst ] );\r\n\t\t\t\t\t\t\tthis.containers.push( inst );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i = queries.length - 1; i >= 0; i-- ) {\r\n\t\t\t\ttargetData = queries[ i ][ 1 ];\r\n\t\t\t\t_queries = queries[ i ][ 0 ];\r\n\r\n\t\t\t\tfor ( j = 0, queriesLength = _queries.length; j < queriesLength; j++ ) {\r\n\t\t\t\t\titem = $( _queries[ j ] );\r\n\r\n\t\t\t\t\t// Data for target checking (mouse manager)\r\n\t\t\t\t\titem.data( this.pluginName + \"-item\", targetData );\r\n\r\n\t\t\t\t\titems.push( {\r\n\t\t\t\t\t\titem: item,\r\n\t\t\t\t\t\tinstance: targetData,\r\n\t\t\t\t\t\twidth: 0, height: 0,\r\n\t\t\t\t\t\tleft: 0, top: 0\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_refreshItemPositions: function( fast ) {\r\n\t\t\tvar i, item, t, p;\r\n\r\n\t\t\tfor ( i = this.items.length - 1; i >= 0; i-- ) {\r\n\t\t\t\titem = this.items[ i ];\r\n\r\n\t\t\t\t//We ignore calculating positions of all connected containers when we're not over them\r\n\t\t\t\tif ( this.currentContainer && item.instance !== this.currentContainer &&\r\n\t\t\t\t\t\titem.item[ 0 ] !== this.currentItem[ 0 ] ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt = this.options.toleranceElement ?\r\n\t\t\t\t\t$( this.options.toleranceElement, item.item ) :\r\n\t\t\t\t\titem.item;\r\n\r\n\t\t\t\tif ( !fast ) {\r\n\t\t\t\t\titem.width = t.outerWidth();\r\n\t\t\t\t\titem.height = t.outerHeight();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tp = t.offset();\r\n\t\t\t\titem.left = p.left;\r\n\t\t\t\titem.top = p.top;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\trefreshPositions: function( fast ) {\r\n\r\n\t\t\t// Determine whether items are being displayed horizontally\r\n\t\t\tthis.floating = this.items.length ?\r\n\t\t\t\tthis.options.axis === \"x\" || this._isFloating( this.items[ 0 ].item ) :\r\n\t\t\t\tfalse;\r\n\r\n\t\t\tif ( this.innermostContainer !== null ) {\r\n\t\t\t\tthis._refreshItemPositions( fast );\r\n\t\t\t}\r\n\r\n\t\t\tvar i, p;\r\n\r\n\t\t\tif ( this.options.custom && this.options.custom.refreshContainers ) {\r\n\t\t\t\tthis.options.custom.refreshContainers.call( this );\r\n\t\t\t} else {\r\n\t\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\r\n\t\t\t\t\tp = this.containers[ i ].element.offset();\r\n\t\t\t\t\tthis.containers[ i ].containerCache.left = p.left;\r\n\t\t\t\t\tthis.containers[ i ].containerCache.top = p.top;\r\n\t\t\t\t\tthis.containers[ i ].containerCache.width =\r\n\t\t\t\t\t\tthis.containers[ i ].element.outerWidth();\r\n\t\t\t\t\tthis.containers[ i ].containerCache.height =\r\n\t\t\t\t\t\tthis.containers[ i ].element.outerHeight();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t_createPlaceholder: function( that ) {\r\n\t\t\tthat = that || this;\r\n\t\t\tvar className, nodeName,\r\n\t\t\t\to = that.options;\r\n\r\n\t\t\tif ( !o.placeholder || o.placeholder.constructor === String ) {\r\n\t\t\t\tclassName = o.placeholder;\r\n\t\t\t\tnodeName = that.currentItem[ 0 ].nodeName.toLowerCase();\r\n\t\t\t\to.placeholder = {\r\n\t\t\t\t\telement: function() {\r\n\r\n\t\t\t\t\t\tvar element = $( \"<\" + nodeName + \">\", that.document[ 0 ] );\r\n\r\n\t\t\t\t\t\tthat._addClass( element, \"ui-sortable-placeholder\",\r\n\t\t\t\t\t\t\t\tclassName || that.currentItem[ 0 ].className )\r\n\t\t\t\t\t\t\t._removeClass( element, \"ui-sortable-helper\" );\r\n\r\n\t\t\t\t\t\tif ( nodeName === \"tbody\" ) {\r\n\t\t\t\t\t\t\tthat._createTrPlaceholder(\r\n\t\t\t\t\t\t\t\tthat.currentItem.find( \"tr\" ).eq( 0 ),\r\n\t\t\t\t\t\t\t\t$( \"<tr>\", that.document[ 0 ] ).appendTo( element )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else if ( nodeName === \"tr\" ) {\r\n\t\t\t\t\t\t\tthat._createTrPlaceholder( that.currentItem, element );\r\n\t\t\t\t\t\t} else if ( nodeName === \"img\" ) {\r\n\t\t\t\t\t\t\telement.attr( \"src\", that.currentItem.attr( \"src\" ) );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( !className ) {\r\n\t\t\t\t\t\t\telement.css( \"visibility\", \"hidden\" );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn element;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tupdate: function( container, p ) {\r\n\r\n\t\t\t\t\t\t// 1. If a className is set as 'placeholder option, we don't force sizes -\r\n\t\t\t\t\t\t// the class is responsible for that\r\n\t\t\t\t\t\t// 2. The option 'forcePlaceholderSize can be enabled to force it even if a\r\n\t\t\t\t\t\t// class name is specified\r\n\t\t\t\t\t\tif ( className && !o.forcePlaceholderSize ) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// If the element doesn't have a actual height or width by itself (without\r\n\t\t\t\t\t\t// styles coming from a stylesheet), it receives the inline height and width\r\n\t\t\t\t\t\t// from the dragged item. Or, if it's a tbody or tr, it's going to have a height\r\n\t\t\t\t\t\t// anyway since we're populating them with <td>s above, but they're unlikely to\r\n\t\t\t\t\t\t// be the correct height on their own if the row heights are dynamic, so we'll\r\n\t\t\t\t\t\t// always assign the height of the dragged item given forcePlaceholderSize\r\n\t\t\t\t\t\t// is true.\r\n\t\t\t\t\t\tif ( !p.height() || ( o.forcePlaceholderSize &&\r\n\t\t\t\t\t\t\t\t( nodeName === \"tbody\" || nodeName === \"tr\" ) ) ) {\r\n\t\t\t\t\t\t\tp.height(\r\n\t\t\t\t\t\t\t\tthat.currentItem.innerHeight() -\r\n\t\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingTop\" ) || 0, 10 ) -\r\n\t\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingBottom\" ) || 0, 10 ) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( !p.width() ) {\r\n\t\t\t\t\t\t\tp.width(\r\n\t\t\t\t\t\t\t\tthat.currentItem.innerWidth() -\r\n\t\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingLeft\" ) || 0, 10 ) -\r\n\t\t\t\t\t\t\t\tparseInt( that.currentItem.css( \"paddingRight\" ) || 0, 10 ) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t//Create the placeholder\r\n\t\t\tthat.placeholder = $( o.placeholder.element.call( that.element, that.currentItem ) );\r\n\r\n\t\t\t//Append it after the actual current item\r\n\t\t\tthat.currentItem.after( that.placeholder );\r\n\r\n\t\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\r\n\t\t\to.placeholder.update( that, that.placeholder );\r\n\r\n\t\t},\r\n\r\n\t\t_createTrPlaceholder: function( sourceTr, targetTr ) {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tsourceTr.children().each( function() {\r\n\t\t\t\t$( \"<td>&#160;</td>\", that.document[ 0 ] )\r\n\t\t\t\t\t.attr( \"colspan\", $( this ).attr( \"colspan\" ) || 1 )\r\n\t\t\t\t\t.appendTo( targetTr );\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t_contactContainers: function( event ) {\r\n\t\t\tvar i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom,\r\n\t\t\t\tfloating, axis,\r\n\t\t\t\tinnermostContainer = null,\r\n\t\t\t\tinnermostIndex = null;\r\n\r\n\t\t\t// Get innermost container that intersects with item\r\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\r\n\r\n\t\t\t\t// Never consider a container that's located within the item itself\r\n\t\t\t\tif ( noder.contains( this.currentItem[ 0 ], this.containers[ i ].element[ 0 ] ) ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this._intersectsWith( this.containers[ i ].containerCache ) ) {\r\n\r\n\t\t\t\t\t// If we've already found a container and it's more \"inner\" than this, then continue\r\n\t\t\t\t\tif ( innermostContainer &&\r\n\t\t\t\t\t\t\tnoder.contains(\r\n\t\t\t\t\t\t\t\tthis.containers[ i ].element[ 0 ],\r\n\t\t\t\t\t\t\t\tinnermostContainer.element[ 0 ] ) ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinnermostContainer = this.containers[ i ];\r\n\t\t\t\t\tinnermostIndex = i;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// container doesn't intersect. trigger \"out\" event if necessary\r\n\t\t\t\t\tif ( this.containers[ i ].containerCache.over ) {\r\n\t\t\t\t\t\tthis.containers[ i ]._trigger( \"out\", event, this._uiHash( this ) );\r\n\t\t\t\t\t\tthis.containers[ i ].containerCache.over = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.innermostContainer = innermostContainer;\r\n\r\n\t\t\t// If no intersecting containers found, return\r\n\t\t\tif ( !innermostContainer ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Move the item into the container if it's not there already\r\n\t\t\tif ( this.containers.length === 1 ) {\r\n\t\t\t\tif ( !this.containers[ innermostIndex ].containerCache.over ) {\r\n\t\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash( this ) );\r\n\t\t\t\t\tthis.containers[ innermostIndex ].containerCache.over = 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// When entering a new container, we will find the item with the least distance and\r\n\t\t\t\t// append our item near it\r\n\t\t\t\tdist = 10000;\r\n\t\t\t\titemWithLeastDistance = null;\r\n\t\t\t\tfloating = innermostContainer.floating || this._isFloating( this.currentItem );\r\n\t\t\t\tposProperty = floating ? \"left\" : \"top\";\r\n\t\t\t\tsizeProperty = floating ? \"width\" : \"height\";\r\n\t\t\t\taxis = floating ? \"pageX\" : \"pageY\";\r\n\r\n\t\t\t\tfor ( j = this.items.length - 1; j >= 0; j-- ) {\r\n\t\t\t\t\tif ( !noder.contains(\r\n\t\t\t\t\t\t\tthis.containers[ innermostIndex ].element[ 0 ], this.items[ j ].item[ 0 ] )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( this.items[ j ].item[ 0 ] === this.currentItem[ 0 ] ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcur = this.items[ j ].item.offset()[ posProperty ];\r\n\t\t\t\t\tnearBottom = false;\r\n\t\t\t\t\tif ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {\r\n\t\t\t\t\t\tnearBottom = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( Math.abs( event[ axis ] - cur ) < dist ) {\r\n\t\t\t\t\t\tdist = Math.abs( event[ axis ] - cur );\r\n\t\t\t\t\t\titemWithLeastDistance = this.items[ j ];\r\n\t\t\t\t\t\tthis.direction = nearBottom ? \"up\" : \"down\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Check if dropOnEmpty is enabled\r\n\t\t\t\tif ( !itemWithLeastDistance && !this.options.dropOnEmpty ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this.currentContainer === this.containers[ innermostIndex ] ) {\r\n\t\t\t\t\tif ( !this.currentContainer.containerCache.over ) {\r\n\t\t\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash() );\r\n\t\t\t\t\t\tthis.currentContainer.containerCache.over = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titemWithLeastDistance ?\r\n\t\t\t\t\tthis._rearrange( event, itemWithLeastDistance, null, true ) :\r\n\t\t\t\t\tthis._rearrange( event, null, this.containers[ innermostIndex ].element, true );\r\n\t\t\t\tthis._trigger( \"change\", event, this._uiHash() );\r\n\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"change\", event, this._uiHash( this ) );\r\n\t\t\t\tthis.currentContainer = this.containers[ innermostIndex ];\r\n\r\n\t\t\t\t//Update the placeholder\r\n\t\t\t\tthis.options.placeholder.update( this.currentContainer, this.placeholder );\r\n\r\n\t\t\t\t//Update scrollParent\r\n\t\t\t\tthis.scrollParent = this.placeholder.scrollParent();\r\n\r\n\t\t\t\t//Update overflowOffset\r\n\t\t\t\tif ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\r\n\t\t\t\t\t\tthis.scrollParent[ 0 ].tagName !== \"HTML\" ) {\r\n\t\t\t\t\tthis.overflowOffset = this.scrollParent.offset();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash( this ) );\r\n\t\t\t\tthis.containers[ innermostIndex ].containerCache.over = 1;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_createHelper: function( event ) {\r\n\r\n\t\t\tvar o = this.options,\r\n\t\t\t\thelper = langx.isFunction( o.helper ) ?\r\n\t\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event, this.currentItem ] ) ) :\r\n\t\t\t\t\t( o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem );\r\n\r\n\t\t\t//Add the helper to the DOM if that didn't happen already\r\n\t\t\tif ( !helper.parents( \"body\" ).length ) {\r\n\t\t\t\tthis.appendTo[ 0 ].appendChild( helper[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( helper[ 0 ] === this.currentItem[ 0 ] ) {\r\n\t\t\t\tthis._storedCSS = {\r\n\t\t\t\t\twidth: this.currentItem[ 0 ].style.width,\r\n\t\t\t\t\theight: this.currentItem[ 0 ].style.height,\r\n\t\t\t\t\tposition: this.currentItem.css( \"position\" ),\r\n\t\t\t\t\ttop: this.currentItem.css( \"top\" ),\r\n\t\t\t\t\tleft: this.currentItem.css( \"left\" )\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif ( !helper[ 0 ].style.width || o.forceHelperSize ) {\r\n\t\t\t\thelper.width( this.currentItem.width() );\r\n\t\t\t}\r\n\t\t\tif ( !helper[ 0 ].style.height || o.forceHelperSize ) {\r\n\t\t\t\thelper.height( this.currentItem.height() );\r\n\t\t\t}\r\n\r\n\t\t\treturn helper;\r\n\r\n\t\t},\r\n\r\n\t\t_adjustOffsetFromHelper: function( obj ) {\r\n\t\t\tif ( typeof obj === \"string\" ) {\r\n\t\t\t\tobj = obj.split( \" \" );\r\n\t\t\t}\r\n\t\t\tif ( langx.isArray( obj ) ) {\r\n\t\t\t\tobj = { left: +obj[ 0 ], top: +obj[ 1 ] || 0 };\r\n\t\t\t}\r\n\t\t\tif ( \"left\" in obj ) {\r\n\t\t\t\tthis.offset.click.left = obj.left + this.margins.left;\r\n\t\t\t}\r\n\t\t\tif ( \"right\" in obj ) {\r\n\t\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\r\n\t\t\t}\r\n\t\t\tif ( \"top\" in obj ) {\r\n\t\t\t\tthis.offset.click.top = obj.top + this.margins.top;\r\n\t\t\t}\r\n\t\t\tif ( \"bottom\" in obj ) {\r\n\t\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_getParentOffset: function() {\r\n\r\n\t\t\t//Get the offsetParent and cache its position\r\n\t\t\tthis.offsetParent = this.helper.offsetParent();\r\n\t\t\tvar po = this.offsetParent.offset();\r\n\r\n\t\t\t// This is a special case where we need to modify a offset calculated on start, since the\r\n\t\t\t// following happened:\r\n\t\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the\r\n\t\t\t// next positioned parent\r\n\t\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't\r\n\t\t\t// the document, which means that the scroll is included in the initial calculation of the\r\n\t\t\t// offset of the parent, and never recalculated upon drag\r\n\t\t\tif ( this.cssPosition === \"absolute\" && this.scrollParent[ 0 ] !== this.document[ 0 ] && this.scrollParent[0] !== this.document[ 0 ].body && // modified by LWF for scrollable body\r\n\t\t\t\t\tnoder.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) {\r\n\t\t\t\tpo.left += this.scrollParent.scrollLeft();\r\n\t\t\t\tpo.top += this.scrollParent.scrollTop();\r\n\t\t\t}\r\n\r\n\t\t\t// This needs to be actually done for all browsers, since pageX/pageY includes this\r\n\t\t\t// information with an ugly IE fix\r\n\t\t\tif ( this.offsetParent[ 0 ] === this.document[ 0 ].body ||\r\n\t\t\t\t\t( this.offsetParent[ 0 ].tagName &&\r\n\t\t\t\t\tthis.offsetParent[ 0 ].tagName.toLowerCase() === \"html\" && langx.ui.ie ) ) {\r\n\t\t\t\tpo = { top: 0, left: 0 };\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttop: po.top + ( parseInt( this.offsetParent.css( \"borderTopWidth\" ), 10 ) || 0 ),\r\n\t\t\t\tleft: po.left + ( parseInt( this.offsetParent.css( \"borderLeftWidth\" ), 10 ) || 0 )\r\n\t\t\t};\r\n\r\n\t\t},\r\n\r\n\t\t_getRelativeOffset: function() {\r\n\r\n\t\t\tif ( this.cssPosition === \"relative\" ) {\r\n\t\t\t\tvar p = this.currentItem.position();\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: p.top - ( parseInt( this.helper.css( \"top\" ), 10 ) || 0 ) +\r\n\t\t\t\t\t\tthis.scrollParent.scrollTop(),\r\n\t\t\t\t\tleft: p.left - ( parseInt( this.helper.css( \"left\" ), 10 ) || 0 ) +\r\n\t\t\t\t\t\tthis.scrollParent.scrollLeft()\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn { top: 0, left: 0 };\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_cacheMargins: function() {\r\n\t\t\tthis.margins = {\r\n\t\t\t\tleft: ( parseInt( this.currentItem.css( \"marginLeft\" ), 10 ) || 0 ),\r\n\t\t\t\ttop: ( parseInt( this.currentItem.css( \"marginTop\" ), 10 ) || 0 )\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t_cacheHelperProportions: function() {\r\n\t\t\tthis.helperProportions = {\r\n\t\t\t\twidth: this.helper.outerWidth(),\r\n\t\t\t\theight: this.helper.outerHeight()\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t_setContainment: function() {\r\n\r\n\t\t\tvar ce, co, over,\r\n\t\t\t\to = this.options;\r\n\t\t\tif ( o.containment === \"parent\" ) {\r\n\t\t\t\to.containment = this.helper[ 0 ].parentNode;\r\n\t\t\t}\r\n\t\t\tif ( o.containment === \"document\" || o.containment === \"window\" ) {\r\n\t\t\t\tthis.containment = [\r\n\t\t\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\r\n\t\t\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\r\n\t\t\t\t\to.containment === \"document\" ?\r\n\t\t\t\t\t\tthis.document.width() :\r\n\t\t\t\t\t\tthis.window.width() - this.helperProportions.width - this.margins.left,\r\n\t\t\t\t\t( o.containment === \"document\" ?\r\n\t\t\t\t\t\t( this.document.height() || document.body.parentNode.scrollHeight ) :\r\n\t\t\t\t\t\tthis.window.height() || this.document[ 0 ].body.parentNode.scrollHeight\r\n\t\t\t\t\t) - this.helperProportions.height - this.margins.top\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\tif ( !( /^(document|window|parent)$/ ).test( o.containment ) ) {\r\n\t\t\t\tce = $( o.containment )[ 0 ];\r\n\t\t\t\tco = $( o.containment ).offset();\r\n\t\t\t\tover = ( $( ce ).css( \"overflow\" ) !== \"hidden\" );\r\n\r\n\t\t\t\tthis.containment = [\r\n\t\t\t\t\tco.left + ( parseInt( $( ce ).css( \"borderLeftWidth\" ), 10 ) || 0 ) +\r\n\t\t\t\t\t\t( parseInt( $( ce ).css( \"paddingLeft\" ), 10 ) || 0 ) - this.margins.left,\r\n\t\t\t\t\tco.top + ( parseInt( $( ce ).css( \"borderTopWidth\" ), 10 ) || 0 ) +\r\n\t\t\t\t\t\t( parseInt( $( ce ).css( \"paddingTop\" ), 10 ) || 0 ) - this.margins.top,\r\n\t\t\t\t\tco.left + ( over ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\r\n\t\t\t\t\t\t( parseInt( $( ce ).css( \"borderLeftWidth\" ), 10 ) || 0 ) -\r\n\t\t\t\t\t\t( parseInt( $( ce ).css( \"paddingRight\" ), 10 ) || 0 ) -\r\n\t\t\t\t\t\tthis.helperProportions.width - this.margins.left,\r\n\t\t\t\t\tco.top + ( over ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\r\n\t\t\t\t\t\t( parseInt( $( ce ).css( \"borderTopWidth\" ), 10 ) || 0 ) -\r\n\t\t\t\t\t\t( parseInt( $( ce ).css( \"paddingBottom\" ), 10 ) || 0 ) -\r\n\t\t\t\t\t\tthis.helperProportions.height - this.margins.top\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_convertPositionTo: function( d, pos ) {\r\n\r\n\t\t\tif ( !pos ) {\r\n\t\t\t\tpos = this.position;\r\n\t\t\t}\r\n\t\t\tvar mod = d === \"absolute\" ? 1 : -1,\r\n\t\t\t\tscroll = this.cssPosition === \"absolute\" &&\r\n\t\t\t\t\t!( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\r\n\t\t\t\t\tnoder.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ?\r\n\t\t\t\t\t\tthis.offsetParent :\r\n\t\t\t\t\t\tthis.scrollParent,\r\n\t\t\t\tscrollIsRootNode = ( /(html|body)/i ).test( scroll[ 0 ].tagName );\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttop: (\r\n\r\n\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\t\tpos.top\t+\r\n\r\n\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\t\tthis.offset.relative.top * mod +\r\n\r\n\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t\tthis.offset.parent.top * mod -\r\n\t\t\t\t\t( ( this.cssPosition === \"fixed\" ?\r\n\t\t\t\t\t\t-this.scrollParent.scrollTop() :\r\n\t\t\t\t\t\t( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod )\r\n\t\t\t\t),\r\n\t\t\t\tleft: (\r\n\r\n\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\t\tpos.left +\r\n\r\n\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\t\tthis.offset.relative.left * mod +\r\n\r\n\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t\tthis.offset.parent.left * mod\t-\r\n\t\t\t\t\t( ( this.cssPosition === \"fixed\" ?\r\n\t\t\t\t\t\t-this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 :\r\n\t\t\t\t\t\tscroll.scrollLeft() ) * mod )\r\n\t\t\t\t)\r\n\t\t\t};\r\n\r\n\t\t},\r\n\r\n\t\t_generatePosition: function( event ) {\r\n\r\n\t\t\tvar top, left,\r\n\t\t\t\to = this.options,\r\n\t\t\t\tpageX = event.pageX,\r\n\t\t\t\tpageY = event.pageY,\r\n\t\t\t\tscroll = this.cssPosition === \"absolute\" &&\r\n\t\t\t\t\t!( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\r\n\t\t\t\t\tnoder.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ?\r\n\t\t\t\t\t\tthis.offsetParent :\r\n\t\t\t\t\t\tthis.scrollParent,\r\n\t\t\t\t\tscrollIsRootNode = ( /(html|body)/i ).test( scroll[ 0 ].tagName );\r\n\r\n\t\t\t// This is another very weird special case that only happens for relative elements:\r\n\t\t\t// 1. If the css position is relative\r\n\t\t\t// 2. and the scroll parent is the document or similar to the offset parent\r\n\t\t\t// we have to refresh the relative offset during the scroll so there are no jumps\r\n\t\t\tif ( this.cssPosition === \"relative\" && !( this.scrollParent[ 0 ] !== this.document[ 0 ] &&\r\n\t\t\t\t\tthis.scrollParent[ 0 ] !== this.offsetParent[ 0 ] ) ) {\r\n\t\t\t\tthis.offset.relative = this._getRelativeOffset();\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * - Position constraining -\r\n\t\t\t * Constrain the position to a mix of grid, containment.\r\n\t\t\t */\r\n\r\n\t\t\tif ( this.originalPosition ) { //If we are not dragging yet, we won't check for options\r\n\r\n\t\t\t\tif ( this.containment ) {\r\n\t\t\t\t\tif ( event.pageX - this.offset.click.left < this.containment[ 0 ] ) {\r\n\t\t\t\t\t\tpageX = this.containment[ 0 ] + this.offset.click.left;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( event.pageY - this.offset.click.top < this.containment[ 1 ] ) {\r\n\t\t\t\t\t\tpageY = this.containment[ 1 ] + this.offset.click.top;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( event.pageX - this.offset.click.left > this.containment[ 2 ] ) {\r\n\t\t\t\t\t\tpageX = this.containment[ 2 ] + this.offset.click.left;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( event.pageY - this.offset.click.top > this.containment[ 3 ] ) {\r\n\t\t\t\t\t\tpageY = this.containment[ 3 ] + this.offset.click.top;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( o.grid ) {\r\n\t\t\t\t\ttop = this.originalPageY + Math.round( ( pageY - this.originalPageY ) /\r\n\t\t\t\t\t\to.grid[ 1 ] ) * o.grid[ 1 ];\r\n\t\t\t\t\tpageY = this.containment ?\r\n\t\t\t\t\t\t( ( top - this.offset.click.top >= this.containment[ 1 ] &&\r\n\t\t\t\t\t\t\ttop - this.offset.click.top <= this.containment[ 3 ] ) ?\r\n\t\t\t\t\t\t\t\ttop :\r\n\t\t\t\t\t\t\t\t( ( top - this.offset.click.top >= this.containment[ 1 ] ) ?\r\n\t\t\t\t\t\t\t\t\ttop - o.grid[ 1 ] : top + o.grid[ 1 ] ) ) :\r\n\t\t\t\t\t\t\t\t\ttop;\r\n\r\n\t\t\t\t\tleft = this.originalPageX + Math.round( ( pageX - this.originalPageX ) /\r\n\t\t\t\t\t\to.grid[ 0 ] ) * o.grid[ 0 ];\r\n\t\t\t\t\tpageX = this.containment ?\r\n\t\t\t\t\t\t( ( left - this.offset.click.left >= this.containment[ 0 ] &&\r\n\t\t\t\t\t\t\tleft - this.offset.click.left <= this.containment[ 2 ] ) ?\r\n\t\t\t\t\t\t\t\tleft :\r\n\t\t\t\t\t\t\t\t( ( left - this.offset.click.left >= this.containment[ 0 ] ) ?\r\n\t\t\t\t\t\t\t\t\tleft - o.grid[ 0 ] : left + o.grid[ 0 ] ) ) :\r\n\t\t\t\t\t\t\t\t\tleft;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttop: (\r\n\r\n\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\t\tpageY -\r\n\r\n\t\t\t\t\t// Click offset (relative to the element)\r\n\t\t\t\t\tthis.offset.click.top -\r\n\r\n\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\t\tthis.offset.relative.top -\r\n\r\n\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t\tthis.offset.parent.top +\r\n\t\t\t\t\t( ( this.cssPosition === \"fixed\" ?\r\n\t\t\t\t\t\t-this.scrollParent.scrollTop() :\r\n\t\t\t\t\t\t( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) )\r\n\t\t\t\t),\r\n\t\t\t\tleft: (\r\n\r\n\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\t\tpageX -\r\n\r\n\t\t\t\t\t// Click offset (relative to the element)\r\n\t\t\t\t\tthis.offset.click.left -\r\n\r\n\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\t\tthis.offset.relative.left -\r\n\r\n\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t\tthis.offset.parent.left +\r\n\t\t\t\t\t( ( this.cssPosition === \"fixed\" ?\r\n\t\t\t\t\t\t-this.scrollParent.scrollLeft() :\r\n\t\t\t\t\t\tscrollIsRootNode ? 0 : scroll.scrollLeft() ) )\r\n\t\t\t\t)\r\n\t\t\t};\r\n\r\n\t\t},\r\n\r\n\t\t_rearrange: function( event, i, a, hardRefresh ) {\r\n\r\n\t\t\ta ? a[ 0 ].appendChild( this.placeholder[ 0 ] ) :\r\n\t\t\t\ti.item[ 0 ].parentNode.insertBefore( this.placeholder[ 0 ],\r\n\t\t\t\t\t( this.direction === \"down\" ? i.item[ 0 ] : i.item[ 0 ].nextSibling ) );\r\n\r\n\t\t\t//Various things done here to improve the performance:\r\n\t\t\t// 1. we create a setTimeout, that calls refreshPositions\r\n\t\t\t// 2. on the instance, we have a counter variable, that get's higher after every append\r\n\t\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout,\r\n\t\t\t// if it's still the same\r\n\t\t\t// 4. this lets only the last addition to the timeout stack through\r\n\t\t\tthis.counter = this.counter ? ++this.counter : 1;\r\n\t\t\tvar counter = this.counter;\r\n\r\n\t\t\tthis._delay( function() {\r\n\t\t\t\tif ( counter === this.counter ) {\r\n\r\n\t\t\t\t\t//Precompute after each DOM insertion, NOT on mousemove\r\n\t\t\t\t\tthis.refreshPositions( !hardRefresh );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t},\r\n\r\n\t\t_clear: function( event, noPropagation ) {\r\n\r\n\t\t\tthis.reverting = false;\r\n\r\n\t\t\t// We delay all events that have to be triggered to after the point where the placeholder\r\n\t\t\t// has been removed and everything else normalized again\r\n\t\t\tvar i,\r\n\t\t\t\tdelayedTriggers = [];\r\n\r\n\t\t\t// We first have to update the dom position of the actual currentItem\r\n\t\t\t// Note: don't do it if the current item is already removed (by a user), or it gets\r\n\t\t\t// reappended (see #4088)\r\n\t\t\tif ( !this._noFinalSort && this.currentItem.parent().length ) {\r\n\t\t\t\tthis.placeholder.before( this.currentItem );\r\n\t\t\t}\r\n\t\t\tthis._noFinalSort = null;\r\n\r\n\t\t\tif ( this.helper[ 0 ] === this.currentItem[ 0 ] ) {\r\n\t\t\t\tfor ( i in this._storedCSS ) {\r\n\t\t\t\t\tif ( this._storedCSS[ i ] === \"auto\" || this._storedCSS[ i ] === \"static\" ) {\r\n\t\t\t\t\t\tthis._storedCSS[ i ] = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentItem.css( this._storedCSS );\r\n\t\t\t\tthis._removeClass( this.currentItem, \"ui-sortable-helper\" );\r\n\t\t\t} else {\r\n\t\t\t\tthis.currentItem.show();\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.fromOutside && !noPropagation ) {\r\n\t\t\t\tdelayedTriggers.push( function( event ) {\r\n\t\t\t\t\tthis._trigger( \"receive\", event, this._uiHash( this.fromOutside ) );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\tif ( ( this.fromOutside ||\r\n\t\t\t\t\tthis.domPosition.prev !==\r\n\t\t\t\t\tthis.currentItem.prev().not( \".ui-sortable-helper\" )[ 0 ] ||\r\n\t\t\t\t\tthis.domPosition.parent !== this.currentItem.parent()[ 0 ] ) && !noPropagation ) {\r\n\r\n\t\t\t\t// Trigger update callback if the DOM position has changed\r\n\t\t\t\tdelayedTriggers.push( function( event ) {\r\n\t\t\t\t\tthis._trigger( \"update\", event, this._uiHash() );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\t// Check if the items Container has Changed and trigger appropriate\r\n\t\t\t// events.\r\n\t\t\tif ( this !== this.currentContainer ) {\r\n\t\t\t\tif ( !noPropagation ) {\r\n\t\t\t\t\tdelayedTriggers.push( function( event ) {\r\n\t\t\t\t\t\tthis._trigger( \"remove\", event, this._uiHash() );\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tdelayedTriggers.push( ( function( c ) {\r\n\t\t\t\t\t\treturn function( event ) {\r\n\t\t\t\t\t\t\tc._trigger( \"receive\", event, this._uiHash( this ) );\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} ).call( this, this.currentContainer ) );\r\n\t\t\t\t\tdelayedTriggers.push( ( function( c ) {\r\n\t\t\t\t\t\treturn function( event ) {\r\n\t\t\t\t\t\t\tc._trigger( \"update\", event, this._uiHash( this ) );\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} ).call( this, this.currentContainer ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Post events to containers\r\n\t\t\tfunction delayEvent( type, instance, container ) {\r\n\t\t\t\treturn function( event ) {\r\n\t\t\t\t\tcontainer._trigger( type, event, instance._uiHash( instance ) );\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\r\n\t\t\t\tif ( !noPropagation ) {\r\n\t\t\t\t\tdelayedTriggers.push( delayEvent( \"deactivate\", this, this.containers[ i ] ) );\r\n\t\t\t\t}\r\n\t\t\t\tif ( this.containers[ i ].containerCache.over ) {\r\n\t\t\t\t\tdelayedTriggers.push( delayEvent( \"out\", this, this.containers[ i ] ) );\r\n\t\t\t\t\tthis.containers[ i ].containerCache.over = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Do what was originally in patches\r\n\t\t\tif ( this.storedCursor ) {\r\n\t\t\t\tthis.document.find( \"body\" ).css( \"cursor\", this.storedCursor );\r\n\t\t\t\tthis.storedStylesheet.remove();\r\n\t\t\t}\r\n\t\t\tif ( this._storedOpacity ) {\r\n\t\t\t\tthis.helper.css( \"opacity\", this._storedOpacity );\r\n\t\t\t}\r\n\t\t\tif ( this._storedZIndex ) {\r\n\t\t\t\tthis.helper.css( \"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex );\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragging = false;\r\n\r\n\t\t\tif ( !noPropagation ) {\r\n\t\t\t\tthis._trigger( \"beforeStop\", event, this._uiHash() );\r\n\t\t\t}\r\n\r\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately,\r\n\t\t\t// it unbinds ALL events from the original node!\r\n\t\t\tthis.placeholder[ 0 ].parentNode.removeChild( this.placeholder[ 0 ] );\r\n\r\n\t\t\tif ( !this.cancelHelperRemoval ) {\r\n\t\t\t\tif ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {\r\n\t\t\t\t\tthis.helper.remove();\r\n\t\t\t\t}\r\n\t\t\t\tthis.helper = null;\r\n\t\t\t}\r\n\r\n\t\t\tif ( !noPropagation ) {\r\n\t\t\t\tfor ( i = 0; i < delayedTriggers.length; i++ ) {\r\n\r\n\t\t\t\t\t// Trigger all delayed events\r\n\t\t\t\t\tdelayedTriggers[ i ].call( this, event );\r\n\t\t\t\t}\r\n\t\t\t\tthis._trigger( \"stop\", event, this._uiHash() );\r\n\t\t\t}\r\n\r\n\t\t\tthis.fromOutside = false;\r\n\t\t\treturn !this.cancelHelperRemoval;\r\n\r\n\t\t},\r\n\r\n\t\t_trigger: function( type, event, ui ) {\r\n\t\t\tif ( this.overrided(type, event, ui) === false ) {\r\n\t\t\t\tthis.cancel();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_uiHash: function( _inst ) {\r\n\t\t\tvar inst = _inst || this;\r\n\t\t\treturn {\r\n\t\t\t\thelper: inst.helper,\r\n\t\t\t\tplaceholder: inst.placeholder || $( [] ),\r\n\t\t\t\tposition: inst.position,\r\n\t\t\t\toriginalPosition: inst.originalPosition,\r\n\t\t\t\toffset: inst.positionAbs,\r\n\t\t\t\titem: inst.currentItem,\r\n\t\t\t\tsender: _inst ? _inst.element : null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tplugins.register(Sortable,\"sortable\");\r\n\r\n\treturn Sortable;\r\n});\r\n"]}