/**
 * skylark-jqueryui-interact - A version of jqueryui interact that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-jqueryui-interact/
 * @license MIT
 */
!function(t,e){function i(t,e){if("."!==t[0])return t;var i=e.split("/"),n=t.split("/");i.pop();for(var s=0;s<n.length;s++)"."!=n[s]&&(".."==n[s]?i.pop():i.push(n[s]));return i.join("/")}var n=e.define,s=e.require,r="function"==typeof n&&n.amd,o=!r&&"undefined"!=typeof exports;if(!r&&!n){var a={};n=e.define=function(t,e,n){"function"==typeof n?(a[t]={factory:n,deps:e.map(function(e){return i(e,t)}),exports:null},s(t)):a[t]=n},s=e.require=function(t){if(!a.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var e=a[t];if(!e.exports){var i=[];e.deps.forEach(function(t){i.push(s(t))}),e.exports=e.factory.apply(window,i)}return e.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(t(n,s),!r){var l=s("skylark-langx/skylark");o?exports=l:e.skylarkjs=l}}(function(define,require){define("skylark-langx/skylark",[],function(){var t={};return t}),define("skylark-langx/types",[],function(){function t(t){return t&&t.constructor===Array}function e(t){return!u(t)&&!a(t)&&"number"==typeof t.length&&!o(t)}function i(t){return"boolean"==typeof t}function n(t){return"undefined"!=typeof t}function s(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(t){var e;for(e in t)if(null!==t[e])return!1;return!0}function o(t){return"function"==d(t)}function a(t){return t&&t instanceof Node}function l(t){return"number"==typeof t}function h(t){return"object"==d(t)}function c(t){return h(t)&&!p(t)&&Object.getPrototypeOf(t)==Object.prototype}function u(t){return"string"==typeof t}function p(t){return t&&t==t.window}function f(t){if(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t.startsWith(e)}}var d=function(){var t={};return"Boolean Number String Function Array Date RegExp Object Error".split(" ").forEach(function(e){t["[object "+e+"]"]=e.toLowerCase()}),function(e){return null==e?String(e):t[toString.call(e)]||"object"}}();return{isArray:t,isArrayLike:e,isBoolean:i,isDefined:n,isDocument:s,isEmptyObject:r,isFunction:o,isHtmlNode:a,isNumber:l,isObject:h,isPlainObject:c,isString:u,isSameOrigin:f,isWindow:p,type:d}}),define("skylark-langx/objects",["./types"],function(t){function e(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var s=1;s<n;s++)for(var r=arguments[s],o=t(r),a=o.length,l=0;l<a;l++){var h=o[l];e&&void 0!==i[h]||(i[h]=r[h])}return i}}function i(t){if(!P(t))return[];var e=[];for(var i in t)e.push(i);return e}function n(t,e){var i,n,s,r,o;if(t)if(i=t.length,i===r){for(n in t)if(t.hasOwnProperty(n)&&(o=t[n],e.call(o,n,o)===!1))break}else for(s=0;s<i&&(o=t[s],e.call(o,s,o)!==!1);s++);return this}function s(t){var e,i=w.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),0==i.length&&(i=[t],t=this),i.forEach(function(i){u(t,i,e)}),t}function r(t){if(P(t))return[];var e=[];for(var i in t)o(t,i)&&e.push(i);return e}function o(t,e){if(!S(e))return null!=t&&b.call(t,e);for(var i=e.length,n=0;n<i;n++){var s=e[n];if(null==t||!b.call(t,s))return!1;t=t[s]}return!!i}function a(t,e){return v(t,e)}function l(t,e){var i=i(e),n=i.length;if(null==t)return!n;for(var s=Object(t),r=0;r<n;r++){var o=i[r];if(e[o]!==s[o]||!(o in s))return!1}return!0}function h(t,e,i,n){for(var s in e)n&&void 0!==t[s]||(i&&(C(e[s])||S(e[s]))?(C(e[s])&&!C(t[s])&&(t[s]={}),S(e[s])&&!S(t[s])&&(t[s]=[]),h(t[s],e[s],i,n)):void 0!==e[s]&&(t[s]=e[s]));return t}function c(t){var e=w.call(arguments,0),i=e.shift(),n=!1;return x(e[e.length-1])&&(n=e.pop()),{target:i,sources:e,deep:n}}function u(){var t=c.apply(this,arguments);return t.sources.forEach(function(e){h(t.target,e,t.deep,!1)}),t.target}function p(t,e){if(S(t)){var i=t.indexOf(e);i!=-1&&t.splice(i,1)}else if(C(t))for(var n in t)if(t[n]==e){delete t[n];break}return this}function f(t,e,i){S(e)||(e=[e]);var n=e.length;if(!n)return k(i)?i.call(t):i;for(var s=0;s<n;s++){var r=null==t?void 0:t[e[s]];void 0===r&&(r=i,s=n),t=k(r)?r.call(t):r}return t}function d(){var t=c.apply(this,arguments);return t.sources.forEach(function(e){h(t.target,e,t.deep,!0)}),t.target}function g(t){for(var e=_.keys(t),i=e.length,n=Array(i),s=0;s<i;s++)n[s]=t[e[s]];return n}function m(t,e){var i;if(void 0===t||null===t)i=t;else if(e&&t.clone)i=t.clone();else if(S(t)){i=[];for(var n=0;n<t.length;n++)i.push(m(t[n]))}else if(C(t)){i={};for(var s in t)i[s]=m(t[s])}else i=t;return i}var v,y,b=Object.prototype.hasOwnProperty,w=Array.prototype.slice,x=t.isBoolean,k=t.isFunction,P=t.isObject,C=t.isPlainObject,S=t.isArray,z="undefined"!=typeof Symbol?Symbol.prototype:null;return v=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var s=typeof t;return("function"===s||"object"===s||"object"==typeof e)&&y(t,e,i,n)},y=function(t,e,i,n){var s=toString.call(t);if(s!==toString.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e;case"[object Symbol]":return z.valueOf.call(t)===z.valueOf.call(e)}var r="[object Array]"===s;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(k(o)&&o instanceof o&&k(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),r){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!v(t[l],e[l],i,n))return!1}else{var h,c=Object.keys(t);if(l=c.length,Object.keys(e).length!==l)return!1;for(;l--;)if(h=c[l],void 0===e[h]||!v(t[h],e[h],i,n))return!1}return i.pop(),n.pop(),!0},{allKeys:i,clone:m,defaults:e(i,!0),each:n,extend:s,has:o,isEqual:a,isMatch:l,keys:r,mixin:u,removeItem:p,result:f,safeMixin:d,values:g}}),define("skylark-langx/arrays",["./types","./objects"],function(t,e){function i(t){return l.call(t,function(t){return null!=t})}function n(t){if(h(t)){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(h(n))for(var s=0;s<n.length;s++)e.push(n[s]);else e.push(n)}return e}return t}function s(t,e){if(!e)return-1;var i;if(e.indexOf)return e.indexOf(t);for(i=e.length;i--;)if(e[i]===t)return i;return-1}function r(t,e,i){return h(t)?(i||[]).concat(Array.prototype.slice.call(t,e||0)):[t]}function o(t,e){var i,s,r,o=[];if(h(t))for(s=0;s<t.length;s++)i=e.call(t[s],t[s],s),null!=i&&o.push(i);else for(r in t)i=e.call(t[r],t[r],r),null!=i&&o.push(i);return n(o)}function a(t){return l.call(t,function(e,i){return t.indexOf(e)==i})}var l=Array.prototype.filter,h=t.isArrayLike;return{compact:i,first:function(t,e){return e?t.slice(0,e):t[0]},each:e.each,flatten:n,inArray:s,makeArray:r,map:o,uniq:a}}),define("skylark-langx/klass",["./arrays","./objects","./types"],function(t,e,i){var n=t.uniq,s=e.has,r=e.mixin,o=i.isArray,a=i.isDefined,l=function(){function t(t,e,i){var n=t.prototype,s=t.superclass.prototype,r=i&&i.noOverrided;for(var o in e)if("constructor"!==o){var a=e[o];"function"==typeof e[o]?n[o]=a._constructor||r||"function"!=typeof s[o]?a:function(t,e,i){return function(){var t=this.overrided;this.overrided=i;var n=e.apply(this,arguments);return this.overrided=t,n}}(o,a,s[o]):"object"==typeof a&&null!==a&&a.get?Object.defineProperty(n,o,a):n[o]=a}return t}function e(t,e){var i=[];return e.forEach(function(t){if(s(t,"__mixins__"))throw new Error("nested mixins");for(var e=[];t;)e.unshift(t),t=t.superclass;i=i.concat(e)}),i=n(i),i=i.filter(function(e){for(var i=t;i;){if(e===i)return!1;if(s(i,"__mixins__"))for(var n=i.__mixins__,r=0;r<n.length;r++)if(n[r]===e)return!1;i=i.superclass}return!0}),i.length>0&&i}function i(t,e){for(var i=t,n=0;n<e.length;n++){var s=new Function;s.prototype=Object.create(i.prototype),s.__proto__=i,s.superclass=null,r(s.prototype,e[n].prototype),s.prototype.__mixin__=e[n],i=s}return i}function l(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function h(n,s,r,c){o(s)&&(c=r,r=s,s=null),s=s||Object,a(r)&&!o(r)&&(c=r,r=!1);var u=s;r&&(r=e(u,r)),r&&(u=i(u,r));var p=n.klassName||"",f=new Function("return function "+p+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return f.prototype=Object.create(u.prototype),f.prototype.constructor=f,f.superclass=s,f.__proto__=u,f._constructor||(f._constructor=l),r&&(f.__mixins__=r),f.partial||(f.partial=function(e,i){return t(this,e,i)}),f.inherit||(f.inherit=function(t,e,i){return h(t,this,e,i)}),f.partial(n,c),f}},h=l();return h}),define("skylark-langx/ArrayStore",["./klass"],function(t){var e=function(t,e){function i(t,e,i){var n,s=0,r=t&&t.length||0,o=[];if(r&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=cache[e]||buildFn(e)),i)for(;s<r;++s)n=t[s],e.call(i,n,s,t)&&o.push(n);else for(;s<r;++s)n=t[s],e(n,s,t)&&o.push(n);return o}function n(n){var s=i(n,t),r=e&&e.sort;if(r&&s.sort("function"==typeof r?r:function(t,e){for(var i,n=0;i=r[n];n++){var s=t[i.attribute],o=e[i.attribute];if(s=null!=s?s.valueOf():s,o=null!=o?o.valueOf():o,s!=o)return!!i.descending==(null==s||s>o)?-1:1}return 0}),e&&(e.start||e.count)){var o=s.length;s=s.slice(e.start||0,(e.start||0)+(e.count||1/0)),s.total=o}return s}switch(typeof t){default:throw new Error("Can not query with a "+typeof t);case"object":case"undefined":var s=t;t=function(t){for(var e in s){var i=s[e];if(i&&i.test){if(!i.test(t[e],t))return!1}else if(i!=t[e])return!1}return!0};break;case"string":if(!this[t])throw new Error("No filter function "+t+" was found in store");t=this[t];case"function":}return n.matches=t,n},i=function(t){function e(e){t[e]=function(){var s=arguments,r=Deferred.when(t,function(t){return i(Array.prototype[e].apply(t,s))});if("forEach"!==e||n)return r}}if(!t)return t;var n=!!t.then;return n&&(t=Object.delegate(t)),e("forEach"),e("filter"),e("map"),null==t.total&&(t.total=Deferred.when(t,function(t){return t.length})),t},n=t({klassName:"ArrayStore",queryEngine:e,idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var i=this.data,n=this.index,s=this.idProperty,r=t[s]=e&&"id"in e?e.id:s in t?t[s]:Math.random();if(r in n){if(e&&e.overwrite===!1)throw new Error("Object already exists");i[n[r]]=t}else n[r]=i.push(t)-1;return r},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,i=this.data;if(t in e)return i.splice(e[t],1),this.setData(i),!0},query:function(t,e){return i(this.queryEngine(t,e)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,i=t.length;e<i;e++)this.index[t[e][this.idProperty]]=e},init:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])}});return n}),define("skylark-langx/aspect",[],function(){function t(t,e,i,s){var r,o=t[e],a="around"==e;if(a){var l=i(function(){return o.advice(this,arguments)});r={remove:function(){l&&(l=t=i=null)},advice:function(t,e){return l?l.apply(t,e):o.advice(t,e)}}}else r={remove:function(){if(r.advice){var n=r.previous,s=r.next;s||n?(n?n.next=s:t[e]=s,s&&(s.previous=n)):delete t[e],t=i=r.advice=null}},id:n++,advice:i,receiveArguments:s};if(o&&!a)if("after"==e){for(;o.next&&(o=o.next););o.next=r,r.previous=o}else"before"==e&&(t[e]=r,r.next=o,o.previous=r);else t[e]=r;return r}function e(e){return function(s,r,o,a){var l,h=s[r];h&&h.target==s||(s[r]=l=function(){for(var t=n,e=arguments,s=l.before;s;)e=s.advice.apply(this,e)||e,s=s.next;if(l.around)var r=l.around.advice(this,e);for(var o=l.after;o&&o.id<t;){if(o.receiveArguments){var a=o.advice.apply(this,e);r=a===i?r:a}else r=o.advice.call(this,r,e);o=o.next}return r},h&&(l.around={advice:function(t,e){return h.apply(t,e)}}),l.target=s);var c=t(l||h,e,o,a);return o=null,c}}var i,n=0;return{after:e("after"),around:e("around"),before:e("before")}}),define("skylark-langx/funcs",["./objects","./types"],function(t,e){function i(t){return requestAnimationFrame?requestAnimationFrame(t):setTimeoutout(t),this}function n(){}function s(t,e){var i=2 in arguments&&slice.call(arguments,2);if(a(t)){var n=function(){return t.apply(e,i?i.concat(slice.call(arguments)):arguments)};return n}if(l(e))return i?(i.unshift(t[e],t),s.apply(null,i)):s(t[e],t);throw new TypeError("expected function")}function r(t,e){var i;return function(){var n=this,s=arguments,r=function(){i=null,t.apply(n,s)};i&&clearTimeout(i),i=setTimeout(r,e)}}var o=t.mixin,a=e.isFunction,l=e.isString,h=function(){function t(){}return function(e,i){t.prototype=e;var n=new t;return t.prototype=null,i&&o(n,i),n}}();return{debounce:r,delegate:h,defer:i,noop:n,proxy:s,returnTrue:function(){return!0},returnFalse:function(){return!1}}}),define("skylark-langx/Deferred",["./arrays","./funcs","./objects"],function(t,e,i){"use strict";function n(t,e){var i={state:function(){return e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},then:function(t,e,n){return n&&this.progress(n),h(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)}),i)},progress:function(t){return e[s].push(t),this}};return i.pipe=i.then,h(t,i)}var s=Symbol?Symbol():"__pglisteners",r=Array.prototype.slice,o=e.proxy,a=t.makeArray,l=i.result,h=i.mixin;h(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(t){return this.then(t),this},fail:function(t){return this["catch"](t),this}});var c=function(){var t=this,e=this.promise=new Promise(function(e,i){t._resolve=e,t._reject=i});n(e,t),this[s]=[]};return c.prototype.resolve=function(t){var e=r.call(arguments);return this.resolveWith(null,e)},c.prototype.resolveWith=function(t,e){return e=e?a(e):[],e.__ctx__=t,this._resolve(e),this._resolved=!0,this},c.prototype.progress=function(t){try{return this[s].forEach(function(e){return e(t)})}catch(e){this.reject(e)}return this},c.prototype.reject=function(t){var e=r.call(arguments);return this.rejectWith(null,e)},c.prototype.rejectWith=function(t,e){return e=e?a(e):[],e.__ctx__=t,this._reject(e),this._rejected=!0,this},c.prototype.isResolved=function(){return!!this._resolved},c.prototype.isRejected=function(){return!!this._rejected},c.prototype.then=function(t,e,i){var n=l(this,"promise");return n.then(t,e,i)},c.prototype.done=c.prototype.then,c.all=function(t){return n(Promise.all(t))},c.first=function(t){return n(Promise.race(t))},c.when=function(t,e,i,n){var s=t&&"function"==typeof t.then,r=s&&t instanceof Promise;if(!s)return arguments.length>1?e?e(t):t:(new c).resolve(t);if(!r){var a=new c(t.cancel);t.then(o(a.resolve,a),o(a.reject,a),a.progress),t=a.promise}return e||i||n?t.then(e,i,n):t},c.reject=function(t){var e=new c;return e.reject(t),e.promise},c.resolve=function(t){var e=new c;return e.resolve.apply(e,arguments),e.promise},c.immediate=c.resolve,c}),define("skylark-langx/async",["./Deferred","./arrays"],function(t,e){var i=e.each,n={parallel:function(e,n,s){var r=[];return s=s||null,n=n||[],i(e,function(t,e){r.push(e.apply(s,n))}),t.all(r)},series:function(e,n,s){var r=[],o=new t,a=o.promise;return s=s||null,n=n||[],o.resolve(),i(e,function(t,e){a=a.then(function(){return e.apply(s,n)}),r.push(a)}),t.all(r)},waterful:function(e,n,s){var r=new t,o=r.promise;return s=s||null,n=n||[],r.resolveWith(s,n),i(e,function(t,e){o=o.then(e)}),o}};return n}),define("skylark-langx/Evented",["./klass","./objects","./types"],function(t,e,i){var n=Array.prototype.slice,s=i.isDefined,r=i.isPlainObject,o=i.isFunction,a=i.isString,l=i.isEmptyObject,h=e.mixin,c=t({on:function(t,e,i,n,s,l){var h=this,c=this._hub||(this._hub={});return r(t)?(s=n,each(t,function(t,n){h.on(t,e,i,n,s,l)}),this):(a(e)||o(n)||(s=n,n=i,i=e,e=void 0),o(i)&&(s=n,n=i,i=null),a(t)&&(t=t.split(/\s/)),t.forEach(function(t){(c[t]||(c[t]=[])).push({fn:n,selector:e,data:i,ctx:s,one:l})}),this)},one:function(t,e,i,n,s){return this.on(t,e,i,n,s,1)},trigger:function(t){if(!this._hub)return this;var e=this;a(t)&&(t=new CustomEvent(t)),Object.defineProperty(t,"target",{value:this});var i=n.call(arguments,1);return i=s(i)?[t].concat(i):[t],[t.type||t.name,"all"].forEach(function(n){var s=e._hub[n];if(s){for(var r=s.length,o=!1,a=0;a<r;a++){var l=s[a];t.data?l.data&&(t.data=h({},l.data,t.data)):t.data=l.data||null,l.fn.apply(l.ctx,i),l.one&&(s[a]=null,o=!0)}o&&(e._hub[n]=compact(s))}}),this},listened:function(t){var e=(this._hub||(this._events={}))[t]||[];return e.length>0},listenTo:function(t,e,i,n){if(!t)return this;a(i)&&(i=this[i]),n?t.one(e,i,this):t.on(e,i,this);for(var s,r=this._listeningTo||(this._listeningTo=[]),o=0;o<r.length;o++)if(r[o].obj==t){s=r[o];break}s||r.push(s={obj:t,events:{}});var l=s.events,h=l[e]=l[e]||[];return h.indexOf(i)==-1&&h.push(i),this},listenToOnce:function(t,e,i){return this.listenTo(t,e,i,1)},off:function(t,e){var i=this._hub||(this._hub={});return a(t)&&(t=t.split(/\s/)),t.forEach(function(t){var n=i[t],s=[];if(n&&e)for(var r=0,o=n.length;r<o;r++)n[r].fn!==e&&n[r].fn._!==e&&s.push(n[r]);s.length?i[t]=s:delete i[t]}),this},unlistenTo:function(t,e,i){var n=this._listeningTo;if(!n)return this;for(var s=0;s<n.length;s++){var r=n[s];if(!t||t==r.obj){var o=r.events;for(var a in o)if(!e||e==a){for(var h=o[a],c=0;c<h.length;c++)i&&i!=h[s]||(r.obj.off(a,h[s],this),h[s]=null);h=o[a]=compact(h),l(h)&&(o[a]=null)}l(o)&&(n[s]=null)}}return n=this._listeningTo=compact(n),l(n)&&(this._listeningTo=null),this}});return c}),define("skylark-langx/strings",[],function(){function t(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function e(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(e){return t}}function i(t){return null==t?"":String.prototype.trim.call(t)}function n(t,e,i,n){function s(t,e){if(t.match(/\./)){var i,n=function(t,e){var s=t.pop();return s?e[s]?n(t,i=e[s]):null:i};return n(t.split(".").reverse(),e)}return e[t]}return n=n||window,i=i?proxy(n,i):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,r,o){var a=s(r,e);return o&&(a=s(o,n).call(n,a,r)),i(a,r).toString()})}return{camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},dasherize:t,deserializeValue:e,lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},serializeValue:function(t){return JSON.stringify(t)},substitute:n,trim:i,upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}}),define("skylark-langx/Xhr",["./arrays","./Deferred","./Evented","./objects","./funcs","./types"],function(arrays,Deferred,Evented,objects,funcs,types){var each=arrays.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(){var t;return function(e){return t||(t=document.createElement("a")),t.href=e,t.href}}(),Xhr=function(){function mimeToDataType(t){if(t&&(t=t.split(";",2)[0]),t){if(t==htmlType)return"html";if(t==jsonType)return"json";if(scriptTypeRE.test(t))return"script";if(xmlTypeRE.test(t))return"xml"}return"text"}function appendQuery(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&"string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(t,e,i,n){var s,r=isArray(e),o=isPlainObject(e);each(e,function(e,a){s=type(a),n&&(e=i?n:n+"["+(o||"object"==s||"array"==s?e:"")+"]"),!n&&r?t.add(a.name,a.value):"array"==s||!i&&"object"==s?serialize(t,a,i,e):t.add(e,a)})}var jsonpID=0,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,XhrDefaultOptions={async:!0,type:"GET",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,xhrFields:{withCredentials:!0}},param=function(t,e){var i=[];return i.add=function(t,e){isFunction(e)&&(e=e()),null==e&&(e=""),this.push(escape(t)+"="+escape(e))},serialize(i,t,e),i.join("&").replace(/%20/g,"+")},Xhr=Evented.inherit({klassName:"Xhr",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest;serializeData(options);var dataType=options.dataType||options.handleAs,mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=!isFormData&&"application/x-www-form-urlencoded";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith("file:")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{"script"==dataType?eval(result):"xml"==dataType?result=xhr.responseXML:"json"==dataType?result=blankRE.test(result)?null:JSON.parse(result):"blob"==dataType?result=Blob([xhrObj.response]):"arraybuffer"==dataType&&(result=xhr.reponse)}catch(e){error=e}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error("abort"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error("timeout"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.progress(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];"content-type"===key.toLowerCase()?contentType=headers[hdr]:xhr.setRequestHeader(key,value)}return contentType&&contentType!==!1&&xhr.setRequestHeader("Content-Type",contentType),headers&&"X-Requested-With"in headers||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),basicAuthorizationToken&&xhr.setRequestHeader("Authorization",basicAuthorizationToken),xhr.send(options.data?options.data:null),deferred.promise},abort:function(){var t=this._,e=t.xhr;e&&e.abort()},request:function(t){return this._request(t)},get:function(t){return t=t||{},t.type="GET",this._request(t)},post:function(t){return t=t||{},t.type="POST",this._request(t)},patch:function(t){return t=t||{},t.type="PATCH",this._request(t)},put:function(t){return t=t||{},t.type="PUT",this._request(t)},del:function(t){return t=t||{},t.type="DELETE",this._request(t)},init:function(t){this._={options:t||{}}}});return["request","get","post","put","del","patch"].forEach(function(t){Xhr[t]=function(e,i){var n=new Xhr({url:e});return n[t](i)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return Xhr}),define("skylark-langx/Restful",["./Evented","./objects","./strings","./Xhr"],function(t,e,i,n){var s=e.mixin,r=i.substitute,o=t.inherit({klassName:"Restful",idAttribute:"id",getBaseUrl:function(t){var e=r(this.baseEndpoint,t),i=this.server+this.basePath+e;return void 0!==t[this.idAttribute]&&(i=i+"/"+t[this.idAttribute]),i},_head:function(t){},_get:function(t){return n.get(this.getBaseUrl(t),t)},_post:function(t,e){var i=this.getBaseUrl(t);return e&&(i=i+"/"+e),n.post(i,t)},_put:function(t,e){var i=this.getBaseUrl(t);return e&&(i=i+"/"+e),n.put(i,t)},_delete:function(t){var e=this.getBaseUrl(t);return n.del(e)},_patch:function(t){var e=this.getBaseUrl(t);return n.patch(e,t)},query:function(t){return this._post(t)},retrieve:function(t){return this._get(t)},create:function(t){return this._post(t)},update:function(t){return this._put(t)},"delete":function(t){return this._delete(t)},patch:function(t){return this._patch(t)},init:function(t){s(this,t)}});return o}),define("skylark-langx/Stateful",["./Evented"],function(t){var e=t.inherit({init:function(t,e){var i=t||{};e||(e={}),this.cid=uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var n=result(this,"defaults");i=mixin({},n,i),this.set(i,e),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return clone(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,i){if(null==t)return this;var n;if("object"==typeof t?(n=t,i=e):(n={})[t]=e,i||(i={}),!this._validate(n,i))return!1;var s=i.unset,r=i.silent,o=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=clone(this.attributes),this.changed={});var l=this.attributes,h=this.changed,c=this._previousAttributes;for(var u in n)e=n[u],isEqual(l[u],e)||o.push(u),isEqual(c[u],e)?delete h[u]:h[u]=e,s?delete l[u]:l[u]=e;if(this.idAttribute in n&&(this.id=this.get(this.idAttribute)),!r){o.length&&(this._pending=i);for(var p=0;p<o.length;p++)this.trigger("change:"+o[p],this,l[o[p]],i)}if(a)return this;if(!r)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,mixin({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,mixin({},t,{unset:!0}))},hasChanged:function(t){return null==t?!isEmptyObject(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var n in t){var s=t[n];isEqual(e[n],s)||(i[n]=s)}return!isEmptyObject(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return clone(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},mixin({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=mixin({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,mixin(e,{validationError:i})),!1)}});return e}),define("skylark-langx/langx",["./skylark","./arrays","./ArrayStore","./aspect","./async","./Deferred","./Evented","./funcs","./klass","./objects","./Restful","./Stateful","./strings","./types","./Xhr"],function(t,e,i,n,s,r,o,a,l,h,c,u,p,f,d){"use strict";function g(t,e){var i=new CustomEvent(t,e);return k(i,e)}function m(t,e,i,n){return P(e)?e.call(t,i,n):e}function v(t){var t=t||window.location.href,e=t.split("?"),i={};return e.length>1&&e[1].split("&").forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),i}function y(t){return parseFloat(t)||0}function b(t){return t._uid||(t._uid=C++)}function _(t){var e=++S+"";return t?t+e:e}function w(){return w}var x=({}.toString,Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter,h.mixin),k=h.safeMixin,P=f.isFunction,C=1,S=0;return x(w,{createEvent:g,funcArg:m,getQueryParams:v,toPixel:y,uid:b,uniqueId:_,URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),x(w,e,n,a,h,p,f,{ArrayStore:i,async:s,Deferred:r,Evented:o,klass:l,Restful:c,Stateful:u,Xhr:d}),t.langx=w}),define("skylark-utils-dom/langx",["skylark-langx/langx"],function(t){return t}),define("skylark-jqueryui-interact/ddmanager",["skylark-utils-dom/langx"],function(t){var e={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,s,r=e.droppables[t.options.scope]||[],o=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(s=0;s<a.length;s++)if(a[s]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(i,n){var s=!1;return t.each((e.droppables[i.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.intersect(i,this,this.options.tolerance,n)&&(s=this._drop.call(this,n)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.prepareOffsets(t,i)})},drag:function(i,n){i.options.refreshPositions&&e.prepareOffsets(i,n),t.each(e.droppables[i.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,s,r,o=e.intersect(i,this,this.options.tolerance,n),a=!o&&this.isover?"isout":o&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===s}),r.length&&(t=$(r[0]).droppable("instance"),t.greedyChild="isover"===a)),t&&"isover"===a&&(t.isover=!1,t.isout=!0,t._out.call(t,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),t&&"isout"===a&&(t.isout=!1,t.isover=!0,t._over.call(t,n)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.prepareOffsets(t,i)}};return e.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,n,s){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=o+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,p=c+i.proportions().height;switch(n){case"fit":return h<=r&&a<=u&&c<=o&&l<=p;case"intersect":return h<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&c<o+e.helperProportions.height/2&&l-e.helperProportions.height/2<p;case"pointer":return t(s.pageY,c,i.proportions().height)&&t(s.pageX,h,i.proportions().width);case"touch":return(o>=c&&o<=p||l>=c&&l<=p||o<c&&l>p)&&(r>=h&&r<=u||a>=h&&a<=u||r<h&&a>u);default:return!1}}}(),e}),define("skylark-utils-dom/skylark",["skylark-langx/skylark"],function(t){return t}),define("skylark-utils-dom/browser",["./skylark","./langx"],function(t,e){"use strict";function i(t){return p?p+t:t.toLowerCase()}function n(t){return d[t]||t}function s(t){return f[t]||t}function r(){return r}var o,a,l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},h=null,c="",u="",p="",f={},d={},g=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,m=window.document,v=m.createElement("div"),y=v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.matchesSelector,b=v.requestFullscreen||v.webkitRequestFullscreen||v.mozRequestFullScreen||v.msRequestFullscreen,_=(m.exitFullscreen||m.webkitCancelFullScreen||m.mozCancelFullScreen||m.msExitFullscreen,
v.style);for(var w in _){var x=w.match(a||g);if(x){a||(o=x[1],a=new RegExp("^("+o+")(.*)$"),u=o,c="-"+o.toLowerCase()+"-",p=o.toLowerCase()),f[e.lowerFirst(x[2])]=w;var k=e.dasherize(x[2]);d[k]=c+k,l[w]&&(h=l[w])}}return h||void 0!==_.transition&&(h=l.transition),e.mixin(r,{css3PropPrefix:c,isIE:!!/msie/i.exec(window.navigator.userAgent),normalizeStyleProperty:s,normalizeCssProperty:n,normalizeCssEvent:i,matchesSelector:y,requestFullScreen:b,exitFullscreen:b,location:function(){return window.location},support:{}}),h&&(r.support.transition={end:h}),v=null,t.browser=r}),define("skylark-utils-dom/styler",["./skylark","./langx"],function(t,e){function i(t,e){return"number"!=typeof e||y[v(t)]?e:e+"px"}function n(t){return t in b?b[t]:b[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function s(t,e){var i=t.className||"",n=i&&void 0!==i.baseVal;return void 0===e?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function r(t,e){return arguments.length<2?!!this.dom.disabled:(t.disabled=e,this)}function o(t){var e,i;return _[t]||(e=document.createElement(t),document.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),_[t]=i),_[t]}function a(t){return w.css(t,"display",""),"none"==w.css(t,"display")&&w.css(t,"display",o(t.nodeName)),this}function l(t){return"none"==w.css(t,"display")||0==w.css(t,"opacity")}function h(t){return w.css(t,"display","none"),this}function c(t,i){if(!i)return this;var r,o=s(t);return r=e.isString(i)?i.split(/\s+/g):i,r.forEach(function(t){var e=n(t);o.match(e)||(o+=(o?" ":"")+t)}),s(t,o),this}function u(t,n,s){if(arguments.length<3){var r,r=getComputedStyle(t,"");if(e.isString(n))return t.style[m(n)]||r.getPropertyValue(v(n));if(e.isArrayLike(n)){var o={};return g.call(n,function(e){o[e]=t.style[m(e)]||r.getPropertyValue(v(e))}),o}}var a="";if("string"==typeof n)s||0===s?a=v(n)+":"+i(n,s):t.style.removeProperty(v(n));else for(key in n)void 0!==n[key]&&(n[key]||0===n[key]?a+=v(key)+":"+i(key,n[key])+";":t.style.removeProperty(v(key)));return t.style.cssText+=";"+a,this}function p(t,e){var i=n(e);return t.className&&t.className.match(i)}function f(t,i){if(i){var r,o=s(t);r=e.isString(i)?i.split(/\s+/g):i,r.forEach(function(t){var e=n(t);o.match(e)&&(o=o.replace(e," "))}),s(t,o.trim())}else s(t,"");return this}function d(t,e,i){var n=this;return e.split(/\s+/g).forEach(function(e){void 0===i&&(i=!n.hasClass(t,e)),i?n.addClass(t,e):n.removeClass(t,e)}),n}var g=(Array.prototype.every,Array.prototype.forEach),m=e.camelCase,v=e.dasherize,y={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},b={},_={},w=function(){return w};return e.mixin(w,{autocssfix:!1,cssHooks:{},addClass:c,className:s,css:u,disabled:r,hasClass:p,hide:h,isInvisible:l,removeClass:f,show:a,toggleClass:d}),t.styler=w}),define("skylark-utils-dom/noder",["./skylark","./langx","./browser","./styler"],function(t,e,i,n){function s(t,i){return e.isArrayLike(t)||(t=[t]),i&&(t=V.call(t,function(t){return t.cloneNode(!0)})),e.flatten(t)}function r(t,e){var i=t.nodeName&&t.nodeName.toLowerCase();return void 0!==e?i===e.toLowerCase():i}function o(t){t=t||document;var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}function a(t,e,i){var n=t,r=n.parentNode;if(r)for(var o=s(e,i),n=n.nextSibling,a=0;a<o.length;a++)n?r.insertBefore(o[a],n):r.appendChild(o[a]);return this}function l(t,e,i){for(var n=t,r=s(e,i),o=0;o<r.length;o++)n.appendChild(r[o]);return this}function h(t,e,i){var n=t,r=n.parentNode;if(r)for(var o=s(e,i),a=0;a<o.length;a++)r.insertBefore(o[a],n);return this}function c(t){return r(t,"iframe")?t.contentDocument:t.childNodes}function u(t,e,i){var n=document.createElement(t);if(e)for(var s in e)n.setAttribute(s,e[s]);return i&&l(i,n),n}function p(t){if(t=e.trim(t),F.test(t))return[u(RegExp.$1)];var i=L.test(t)&&RegExp.$1;i in U||(i="*");var n=U[i];return n.innerHTML=""+t,dom=K.call(n.childNodes),dom.forEach(function(t){n.removeChild(t)}),dom}function f(t,e){var i,n=this;return!R||1!==t.nodeType||e?t.cloneNode(e):e?void 0:(i=document.createElement(t.nodeName),each(n.getAttribs(t),function(e){n.setAttrib(i,e.nodeName,n.getAttrib(t,e.nodeName))}),i)}function d(t,e){return w(e,t)}function g(t){return document.createTextNode(t)}function m(){return document}function v(t){for(;t.hasChildNodes();){var e=t.firstChild;t.removeChild(e)}return this}function y(t){if(t===!1)i.exitFullScreen.apply(document);else{if(!t)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;i.requestFullScreen.apply(t),J=t}}function b(t,e){var i,n,s,r,o,a=t.nodeName.toLowerCase();return"area"===a?(i=t.parentNode,n=i.name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&(s=$("img[usemap='#"+n+"']"),s.length>0&&s.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(r=!t.disabled,r&&(o=$(t).closest("fieldset")[0],o&&(r=!o.disabled))):r="a"===a?t.href||e:e,r&&$(t).is(":visible")&&visible($(t)))}function _(t,i){if(void 0===i)return t.innerHTML;if(this.empty(t),i=i||"",e.isString(i)&&(i=i.replace(Z,"<$1></$2>")),e.isString(i)||e.isNumber(i))t.innerHTML=i;else if(e.isArrayLike(i))for(var n=0;n<i.length;n++)t.appendChild(i[n]);else t.appendChild(i)}function w(t,e,i){if(i)return t.parentNode===e;if(document.documentElement.contains)return e.contains(t);for(;t;){if(e===t)return!0;t=t.parentNode}return!1}function x(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function k(t){return t?9==t.nodeType?t:t.ownerDocument:document}function P(t){var e=k(t);return e.defaultView||e.parentWindow}function C(t,e,i){for(var n=t,r=n.firstChild,o=s(e,i),a=0;a<o.length;a++)r?n.insertBefore(o[a],r):n.appendChild(o[a]);return this}function S(t){for(var e=t.offsetParent||document.body;e&&!Y.test(e.nodeName)&&"static"==n.css(e,"position");)e=e.offsetParent;return e}function z(t,e){var i=u("div",e);return n.css(i,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),t.appendChild(i),i}function T(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(e){console.warn("The node is already removed",e)}return this}function E(t,i){e.isArrayLike(i)||(i=[i]);for(var n=0;n<i.length;n++)t.removeChild(i[n]);return this}function N(t,e){return e.parentNode.replaceChild(t,e),this}function A(t,e){e=e||{};var i,n=this,s=e.text,r=e.style,o=e.time,a=e.callback,l=this.createElement("div",{className:e.className||"throbber",style:r}),h=(z(l,{className:"overlay fade"}),this.createElement("div",{className:"throb"})),c=this.createTextNode(s||""),u=function(){i&&(clearTimeout(i),i=null),l&&(n.remove(l),l=null)},p=function(t){t&&t.text&&l&&(c.nodeValue=t.text)};h.appendChild(c),l.appendChild(h),t.appendChild(l);var f=function(){u(),a&&a()};return o&&(i=setTimeout(f,o)),{remove:u,update:p}}function I(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)I(t.childNodes[i],e);return this}function H(t){for(var e=t.firstChild,i=t.children.length-1;i>0;i--)if(i>0){var n=t.children[i];t.insertBefore(n,e)}}function D(t,i){e.isString(i)&&(i=this.createFragment(i).firstChild),t.parentNode.insertBefore(i,t),i.appendChild(t)}function O(t,e){var i=K.call(t.childNodes);t.appendChild(e);for(var n=0;n<i.length;n++)e.appendChild(i[n]);return this}function W(t){var e=t.parentNode;if(e){if(this.isDoc(e.parentNode))return;e.parentNode.insertBefore(t,e)}}function j(){return j}var R=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),L=/^\s*<(\w+|!)[^>]*>/,F=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,M=document.createElement("div"),q=document.createElement("table"),B=document.createElement("tbody"),X=document.createElement("tr"),U={tr:B,tbody:q,thead:q,tfoot:q,td:X,th:X,"*":M},Y=/^(?:body|html)$/i,V=Array.prototype.map,K=Array.prototype.slice,J=null,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;return e.mixin(j,{active:o,blur:function(t){t.blur()},body:function(){return document.body},clone:f,contents:c,createElement:u,createFragment:p,contains:d,createTextNode:g,doc:m,empty:v,fullScreen:y,focusable:b,html:_,isChildOf:w,isDoc:x,isWindow:e.isWindow,offsetParent:S,ownerDoc:k,ownerWindow:P,after:a,before:h,prepend:C,append:l,remove:T,removeChild:E,replace:N,throb:A,traverse:I,reverse:H,wrapper:D,wrapperInner:O,unwrap:W}),t.noder=j}),define("skylark-utils-dom/finder",["./skylark","./langx","./browser","./noder"],function(t,e,n,s,r){function o(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function a(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t,i,n){for(var s=n&&e.isString(n);t=t.parentNode;){if(b(t,i))return t;if(n)if(s){if(b(t,n))break}else if(t==n)break}return null}function h(t,i,n){for(var s=[],r=n&&e.isString(n);(t=t.parentNode)&&9!==t.nodeType;)if(s.push(t),n)if(r){if(b(t,n))break}else if(t==n)break;return i&&(s=S.filter(s,i)),s}function c(t,e){return e=e||s.doc(),e.getElementById(t)}function u(t,e){for(var i=t.childNodes,n=[],s=0;s<i.length;s++){var t=i[s];1==t.nodeType&&n.push(t)}return e&&(n=S.filter(n,e)),n}function p(t,e){for(;t&&!b(t,e);)t=t.parentNode;return t}function f(t,e){try{return T.call(t.querySelectorAll(e))}catch(i){}return S.query(t,e)}function d(t,e){try{return t.querySelector(e)}catch(i){}var n=S.query(t,e);return n.length>0?n[0]:null}function g(t,e){return e||(e=t,t=document.body),b(t,e)?t:d(t,e)}function m(t,e){return e||(e=t,t=document.body),f(t,e)}function v(t,e,i){for(var n=t.childNodes,s=n[0];s;){if(1==s.nodeType){if(!e||b(s,e))return s;if(i)break}s=s.nextSibling}return null}function y(t,e,i){for(var n=t.childNodes,s=n[n.length-1];s;){if(1==s.nodeType){if(!e||b(s,e))return s;if(i)break}s=s.previousSibling}return null}function b(t,i){if(!i||!t||1!==t.nodeType)return!1;if(e.isString(i)){try{return E.call(t,i.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(n){}return S.match(t,i)}return e.isArrayLike(i)?e.inArray(t,i)>-1:e.isPlainObject(i)?S.check(t,i):t===i}function _(t,e,i){for(var n=t.nextSibling;n;){if(1==n.nodeType){if(!e||b(n,e))return n;if(i)break}n=n.nextSibling}return null}function w(t,e){for(var i=t.nextSibling,n=[];i;)1==i.nodeType&&(e&&!b(i,e)||n.push(i)),i=i.nextSibling;return n}function x(t,e){var i=t.parentNode;return!i||e&&!b(i,e)?null:i}function k(t,e,i){for(var n=t.previousSibling;n;){if(1==n.nodeType){if(!e||b(n,e))return n;if(i)break}n=n.previousSibling}return null}function P(t,e){for(var i=t.previousSibling,n=[];i;)1==i.nodeType&&(e&&!b(i,e)||n.push(i)),i=i.previousSibling;return n}function C(t,e){for(var i=t.parentNode.firstChild,n=[];i;)1==i.nodeType&&i!==t&&(e&&!b(i,e)||n.push(i)),i=i.nextSibling;return n}var S={},z=Array.prototype.filter,T=Array.prototype.slice,E=n.matchesSelector;(function(){function t(t,r,o,l,c,p,f,d,g,m,v,y,b,_,w,x){if((r||i===-1)&&(e.expressions[++i]=[],n=-1,r))return"";if(o||l||n===-1){o=o||" ";var k=e.expressions[i];s&&k[n]&&(k[n].reverseCombinator=h(o)),k[++n]={combinator:o,tag:"*"}}var P=e.expressions[i][n];if(c)P.tag=c.replace(a,"");else if(p)P.id=p.replace(a,"");else if(f)f=f.replace(a,""),P.classList||(P.classList=[]),P.classes||(P.classes=[]),P.classList.push(f),P.classes.push({value:f,regexp:new RegExp("(^|\\s)"+u(f)+"(\\s|$)")});else if(b)x=x||w,x=x?x.replace(a,""):null,P.pseudos||(P.pseudos=[]),P.pseudos.push({key:b.replace(a,""),value:x,type:1==y.length?"class":"element"});else if(d){d=d.replace(a,""),v=(v||"").replace(a,"");var C,S;switch(g){case"^=":S=new RegExp("^"+u(v));break;case"$=":S=new RegExp(u(v)+"$");break;case"~=":S=new RegExp("(^|\\s)"+u(v)+"(\\s|$)");break;case"|=":S=new RegExp("^"+u(v)+"(-|$)");break;case"=":C=function(t){return v==t};break;case"*=":C=function(t){return t&&t.indexOf(v)>-1};break;case"!=":C=function(t){return v!=t};break;default:C=function(t){return!!t}}""==v&&/^[*$^]=$/.test(g)&&(C=function(){return!1}),C||(C=function(t){return t&&S.test(t)}),P.attributes||(P.attributes=[]),P.attributes.push({key:d,operator:g,value:v,test:C})}return""}var e,i,n,s,r={},o={},a=/\\/g,l=function(n,a){if(null==n)return null;if(n.Slick===!0)return n;n=(""+n).replace(/^\s+|\s+$/g,""),s=!!a;var h=s?o:r;if(h[n])return h[n];for(e={Slick:!0,expressions:[],raw:n,reverse:function(){return l(this.raw,!0)}},i=-1;n!=(n=n.replace(p,t)););return e.length=e.expressions.length,h[e.raw]=s?c(e):e},h=function(t){return"!"===t?" ":" "===t?"!":/^!/.test(t)?t.replace(/^!/,""):"!"+t},c=function(t){for(var e=t.expressions,i=0;i<e.length;i++){for(var n=e[i],s={parts:[],tag:"*",combinator:h(n[0].combinator)},r=0;r<n.length;r++){var o=n[r];o.reverseCombinator||(o.reverseCombinator=" "),o.combinator=o.reverseCombinator,delete o.reverseCombinator}n.reverse().push(s)}return t},u=function(){var t=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,e="\\";return function(i){return i.replace(t,e)}}(),p=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+u(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),f=this.Slick||{};f.parse=function(t){return l(t)},f.escapeRegExp=u,this.Slick||(this.Slick=f)}).apply(S);var N=/^(?:input|select|textarea|button)$/i,A=/^h\d$/i,T=Array.prototype.slice;S.parseSelector=S.Slick.parse;var I=S.pseudos={button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},checked:function(t){return!!t.checked},contains:function(t,e,i,n){if($(this).text().indexOf(n)>-1)return this},disabled:function(t){return!!t.disabled},enabled:function(t){return!t.disabled},eq:function(t,e,i,n){return e==n},even:function(t,e,i,n){return e%2===0},focus:function(t){return document.activeElement===t&&(t.href||t.type||t.tabindex)},focusable:function(t){return s.focusable(t,null!=t.tabindex)},first:function(t,e){return 0===e},gt:function(t,e,i,n){return e>n},has:function(t,e,i,n){return g(t,n)},header:function(t){return A.test(t.nodeName)},hidden:function(t){return!S.pseudos.visible(t)},input:function(t){return N.test(t.nodeName)},last:function(t,e,i){return e===i.length-1},lt:function(t,e,i,n){return e<n},not:function(t,e,i,n){return!b(t,n)},odd:function(t,e,i,n){return e%2===1},parent:function(t){return!!t.parentNode},selected:function(t){return!!t.selected},tabbable:function(t){var e=t.tabindex,i=null!=e;return(!i||e>=0)&&s.focusable(element,i)},text:function(t){return"text"===t.type},visible:function(t){return t.offsetWidth&&t.offsetWidth}};["first","eq","last"].forEach(function(t){I[t].isArrayFilter=!0}),I.nth=I.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I[i]=o(i);for(i in{submit:!0,reset:!0})I[i]=a(i);S.divide=function(t){var e,i,n,s,r,o="",a=[];if((i=t.id)&&(o+="#"+i),n=t.classes)for(var l=n.length;l--;)o+="."+n[l].value;if(s=t.attributes)for(var l=0;l<s.length;l++)o+=s[l].operator?"["+s[l].key+s[l].operator+JSON.stringify(s[l].value)+"]":"["+s[l].key+"]";if(r=t.pseudos)for(l=r.length;l--;)part=r[l],this.pseudos[part.key]?a.push(part):void 0!==part.value&&(o+=":"+part.key+"("+JSON.stringify(part));return(e=t.tag)&&"*"!==e&&(o=e.toUpperCase()+o),o||(o="*"),{nativeSelector:o,customPseudos:a}},S.check=function(t,e,i,n,s){var r,o,a,l,h,c,u,p,f;if(!s){if(r=e.tag){var d=t.nodeName.toUpperCase();if("*"==r){if(d<"@")return!1}else if(d!=(r||"").toUpperCase())return!1}if((o=e.id)&&t.getAttribute("id")!=o)return!1;if(a=e.classes)for(c=a.length;c--;)if(p=t.getAttribute("class"),!p||!a[c].regexp.test(p))return!1;if(l=e.attributes)for(c=l.length;c--;)if(u=l[c],u.operator?!u.test(t.getAttribute(u.key)):!t.hasAttribute(u.key))return!1}if(h=e.pseudos)for(c=h.length;c--;)if(u=h[c],f=this.pseudos[u.key]){if((s&&f.isArrayFilter||!s&&!f.isArrayFilter)&&!f(t,i,n,u.value))return!1}else if(!s&&!E.call(t,u.key))return!1;return!0},S.match=function(t,i){var n;if(n=e.isString(i)?S.Slick.parse(i):i,!n)return!0;var s,r,o=n.expressions,a=0;for(s=0;r=o[s];s++)if(1==r.length){var l=r[0];if(this.check(t,l))return!0;a++}if(a==n.length)return!1;var h,c=this.query(document,n);for(s=0;h=c[s++];)if(h===t)return!0;return!1},S.filterSingle=function(t,e){var i=z.call(t,function(i,n){return S.check(i,e,n,t,!1)});return i=z.call(i,function(t,n){return S.check(t,e,n,i,!0)})},S.filter=function(t,i){var n;if(!e.isString(i))return S.filterSingle(t,i);n=S.Slick.parse(i);var s,r,o=n.expressions,a=[];for(s=0;r=o[s];s++){if(1!=r.length)throw new Error("not supported selector:"+i);var l=r[0],h=S.filterSingle(t,l);a=e.uniq(a.concat(h))}return a},S.combine=function(t,e){var i,n=e.combinator,s=e,r=[];switch(n){case">":r=u(t,s);break;case"+":i=_(t,s,!0),i&&r.push(i);break;case"^":i=v(t,s,!0),i&&r.push(i);break;case"~":r=w(t,s);break;case"++":var o=k(t,s,!0),a=_(t,s,!0);o&&r.push(o),a&&r.push(a);break;case"~~":r=C(t,s);break;case"!":r=h(t,s);break;case"!>":i=x(t,s),i&&r.push(i);break;case"!+":r=k(t,s,!0);break;case"!^":i=y(t,s,!0),i&&r.push(i);break;case"!~":r=P(t,s);break;default:var l=this.divide(e);if(r=T.call(t.querySelectorAll(l.nativeSelector)),l.customPseudos)for(var c=l.customPseudos.length-1;c>=0;c--)r=z.call(r,function(t,e){return S.check(t,{pseudos:[l.customPseudos[c]]},e,r,!1)}),r=z.call(r,function(t,e){return S.check(t,{pseudos:[l.customPseudos[c]]},e,r,!0)})}return r},S.query=function(t,i,n){for(var s,r,o=this.Slick.parse(i),a=[],l=o.expressions,h=0;s=l[h];h++){for(var c,u=[t],p=0;r=s[p];p++)c=e.map(u,function(t,e){return S.combine(t,r)}),c&&(u=c);c&&(a=a.concat(c))}return a};var H=function(){return H};return e.mixin(H,{ancestor:l,ancestors:h,byId:c,children:u,closest:p,descendant:d,descendants:f,find:g,findAll:m,firstChild:v,lastChild:y,matches:b,nextSibling:_,nextSiblings:w,parent:x,previousSibling:k,previousSiblings:P,pseudos:S.pseudos,siblings:C}),t.finder=H}),define("skylark-utils-dom/datax",["./skylark","./langx","./finder"],function(t,e,i){function n(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function s(t,e,i){return this.attr(t,"aria-"+e,i)}function r(t,e,i){if(void 0!==i)return t.setAttribute(e,i),this;if("object"==typeof e){for(var n in e)r(t,n,e[n]);return this}return t.hasAttribute&&t.hasAttribute(e)?t.getAttribute(e):void 0}function o(t){var i={};return e.each(t.attributes||[],function(t,e){0==e.name.indexOf("data-")&&(i[x(e.name.replace("data-",""))]=k(e.value))}),i}function a(t,e){var i=t._$_store;return!i&&e&&(i=t._$_store=o(t)),i}function l(t,e){if(void 0===e)return a(t,!0);var i=a(t);if(i){if(e in i)return i[e];var n=x(e);if(n in i)return i[n]}var s="data-"+e.replace(P,"-$1").toLowerCase();return r(t,s)}function h(t,e,i){var n=a(t,!0);n[x(e)]=i}function c(t,e,i){if(void 0===i){if("object"==typeof e){for(var n in e)h(t,n,e[n]);return this}return l(t,e)}return h(t,e,i),this}function u(t){t._$_store&&delete t._$_store}function p(t,i){e.isString(i)&&(i=i.split(/\s+/));var n=a(t,!0);return i.forEach(function(t){delete n[t]}),this}function f(t,e){return _.call(t,function(t){return t[e]})}function d(t,e,i){return e=C[e]||e,void 0===i?t[e]:(t[e]=i,this)}function g(t,e){return e.split(" ").forEach(function(e){n(t,e)}),this}function m(t,e){return e.split(" ").forEach(function(e){delete t[e]}),this}function v(t,e){return void 0===e?t.textContent:(t.textContent=null==e?"":""+e,this)}function y(t,e){if(void 0===e){if(t.multiple){var n=w.call(i.find(t,"option"),function(t){return t.selected});return f(n,"value")}return t.value}return t.value=e,this}function b(){return b}var _=Array.prototype.map,w=Array.prototype.filter,x=e.camelCase,k=e.deserializeValue,P=/([A-Z])/g,C={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return i.pseudos.data=function(t,e,i,n){return!!c(t,n||i[3])},e.mixin(b,{aria:s,attr:r,cleanData:u,data:c,pluck:f,prop:d,removeAttr:g,removeData:p,removeProp:m,text:v,val:y}),t.datax=b}),define("skylark-utils-dom/eventer",["./skylark","./langx","./browser","./finder","./noder","./datax"],function(t,e,i,n,s,r){function o(t,i){return!i&&t.isDefaultPrevented||(i||(i=t),e.each(b,function(n,s){var r=i[n];t[n]=function(){return this[s]=e.returnTrue,r&&r.apply(i,arguments)},t[s]=e.returnFalse})),t}function a(t){var e=(""+t).split(".");return{type:e[0],ns:e.slice(1).sort().join(" ")}}function l(t,i){var n,s={originalEvent:t};for(n in t)"keyIdentifier"===n||y.test(n)||void 0===t[n]||(s[n]=t[n]);return i&&e.mixin(s,i),o(s,t)}function h(t,i,n,s){var r=this;if(e.isPlainObject(i))return e.each(i,function(e,i){h(t,e,n,i)}),r;e.isString(n)||e.isFunction(s)||s===!1||(s=n,n=void 0),s===!1&&(s=e.returnFalse),"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var o=N(t);return i&&i.forEach(function(t){o.unregister(t,s,{selector:n})}),this}function c(t,i,n,s,r,o){if(e.isPlainObject(i))return e.each(i,function(e,i){c(t,e,n,s,i,o)}),this;e.isString(n)||e.isFunction(r)||(r=s,s=n,n=void 0),e.isFunction(s)&&(r=s,s=void 0),r===!1&&(r=e.returnFalse),"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var a=N(t);return i.forEach(function(t){return"ready"==t?d(r):void a.register(t,r,{data:s,selector:n,one:!!o})}),this}function u(t,e,i,n,s){return c(t,e,i,n,s,1),this}function p(t){return window.document.all&&(t.keyCode=0),t.preventDefault&&(t.preventDefault(),t.stopPropagation()),this}function f(t,e,i){var n;n=e instanceof Event?e:w(e,i),n._args=i;var s=t.dispatchEvent||t.trigger;return s?s.call(t,n):console.warn("The evented parameter is not a eventable object"),this}function d(t){return _.test(document.readyState)&&document.body?e.defer(t):document.addEventListener("DOMContentLoaded",t,!1),this}function g(t){var e=r.data(t,"shortcuts");if(!e){e={},r.data(t,"shortcuts",e);var i=function(t,e){var i=e.metaKey||e.ctrlKey;if(t.ctrl==i&&t.alt==e.altKey&&t.shift==e.shiftKey&&(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode))return e.preventDefault(),"keydown"==e.type&&t.fn(e),!0};c(t,"keyup keypress keydown",function(t){if(!/INPUT|TEXTAREA/.test(t.target.nodeName))for(var n in e)i(e[n],t)})}return{add:function(t,i){var n;n=t.indexOf(",")>-1?t.toLowerCase().split(","):t.toLowerCase().split(" "),n.forEach(function(t){var n={fn:i,alt:!1,ctrl:!1,shift:!1};t.split("+").forEach(function(t){switch(t){case"alt":case"ctrl":case"shift":n[t]=!0;break;default:n.charCode=t.charCodeAt(0),n.keyCode=A[t]||t.toUpperCase().charCodeAt(0)}});var s=(n.ctrl?"ctrl":"")+","+(n.alt?"alt":"")+","+(n.shift?"shift":"")+","+n.keyCode;e[s]=n})}}}function m(){return m}var v=(e.mixin,e.each,Array.prototype.slice,e.uid),y=/^([A-Z]|returnValue$|layer[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},_=/complete|loaded|interactive/,w=function(){function t(t){var e=n[t];return e||(e=0),i[e]}var i=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],n={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,textInput:12,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15};return function(i,n){e.isString(i)?n=n||{}:(n=i||{},i=n.type||"");var s=a(i);i=s.type,n=e.mixin({bubbles:!0,cancelable:!0},n),s.ns&&(n.namespace=s.ns);var r=t(i),l=new r(i,n);return e.safeMixin(l,n),o(l)}}(),x={},k="onfocusin"in window,P={focus:"focusin",blur:"focusout"},C={mouseenter:"mouseover",mouseleave:"mouseout"},S=function(t){return C[t]||k&&P[t]||t},z={},T=e.klass({init:function(t,e){this._target=t,this._event=e,this._bindings=[]},add:function(t,i){var r=this._bindings,o={fn:t,options:e.mixin({},i)};r.push(o);var a=this;if(!a._listener){a._listener=function(t){var i=this,r=l(t),o=t._args,h=a._bindings,c=r.namespace;o=e.isDefined(o)?[r].concat(o):[r],e.each(h,function(t,l){var h=i;if(r.isImmediatePropagationStopped&&r.isImmediatePropagationStopped())return!1;var u=l.fn,p=l.options||{},f=p.selector,d=p.one,g=p.data;if(!c||c==p.ns||p.ns.indexOf(c)!==-1){if(f){if(h=n.closest(r.target,f),!h||h===i)return;e.mixin(r,{currentTarget:h,liveFired:i})}var m=a._event;if(m in C){var v=r.relatedTarget;if(v&&(v===h||s.contains(h,v)))return}e.isDefined(g)&&(r.data=g),d&&a.remove(u,p);var y=u.apply(h,o);y===!1&&(r.preventDefault(),r.stopPropagation())}})};var h=a._event;a._target.addEventListener?a._target.addEventListener(S(h),a._listener,!1):console.warn("invalid eventer object",a._target)}},remove:function(t,i){function n(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}i=e.mixin({},i);var s;i.ns&&(s=n(i.ns)),this._bindings=this._bindings.filter(function(e){var n=(!t||t===e.fn)&&(!s||s.test(e.options.ns))&&(!i.selector||i.selector==e.options.selector);return!n}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(S(this._event),this._listener,!1),this._listener=null)}}),E=e.klass({init:function(t){this._target=t,this._handler={}},register:function(t,i,n){var s=a(t),t=s.type,r=x[t],o=r&&(r.bindType||r.bindEventName),l=this._handler;void 0===l[t]&&(l[t]=new T(this._target,o||t)),l[t].add(i,e.mixin({ns:s.ns},n))},unregister:function(t,i,n){var s=this._handler,r=a(t);if(t=r.type){var o=s[t];o&&o.remove(i,e.mixin({ns:r.ns},n))}else for(t in s){var o=s[t];o.remove(i,e.mixin({ns:r.ns},n))}}}),N=function(t){var e=v(t),i=z[e];return i||(i=z[e]=new E(t)),i},A={backspace:8,comma:188,"delete":46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};return i.support.transitionEnd&&(x.transitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end}),e.mixin(m,{create:w,keys:A,off:h,on:c,one:u,proxy:l,ready:d,shortcuts:g,special:x,stop:p,trigger:f}),t.eventer=m}),define("skylark-utils-dom/geom",["./skylark","./langx","./noder","./styler"],function(t,e,i,n){function s(){if(void 0!==T)return T;var t,e,s=i.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],r=s.childNodes[0];return i.append(document.body,s),t=r.offsetWidth,n.css(s,"overflow","scroll"),e=r.offsetWidth,t===e&&(e=s[0].clientWidth),i.remove(s),T=t-e}function r(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:N(e.borderLeftWidth,t),top:N(e.borderTopWidth,t),right:N(e.borderRightWidth,t),bottom:N(e.borderBottomWidth,t)}}function o(t,e){if(void 0===e)return E.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var i=A(t),n=o(i),s=d(t),a=r(i);return _(t,{top:e.top-n.top-s.top-a.top,left:e.left-n.left-s.left-a.left}),this}function a(t,e){return void 0===e?t.getBoundingClientRect():(o(t,e),C(t,e),this)}function l(t,e){return void 0==e?h(t).height:h(t,{height:e})}function h(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var i="border-box"===n.css(t,"box-sizing"),s={width:e.width,height:e.height};if(i){var o=r(t);void 0!==s.width&&(s.width=s.width+o.left+o.right),void 0!==s.height&&(s.height=s.height+o.top+o.bottom)}else{var a=v(t);void 0!==s.width&&(s.width=s.width-a.left-a.right),void 0!==s.height&&(s.height=s.height-a.top-a.bottom)}return n.css(t,s),this}function c(t,e){return void 0==e?h(t).width:(h(t,{width:e}),this)}function u(t){var e=h(t),i=v(t);return{left:i.left,top:i.top,width:e.width-i.left-i.right,height:e.height-i.top-i.bottom}}function p(t){var e=t.documentElement,i=t.body,n=Math.max,s=n(e.scrollWidth,i.scrollWidth),r=n(e.clientWidth,i.clientWidth),o=n(e.offsetWidth,i.offsetWidth),a=n(e.scrollHeight,i.scrollHeight),l=n(e.clientHeight,i.clientHeight),h=n(e.offsetHeight,i.offsetHeight);return{width:s<o?r:s,height:a<h?l:a}}function f(t,e){return void 0==e?C(t).height:(C(t,{height:e}),this)}function d(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:N(e.marginLeft),top:N(e.marginTop),right:N(e.marginRight),bottom:N(e.marginBottom)}}function g(t){var e=w(t),i=d(t);return{left:e.left,top:e.top,width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}}function m(t){var e=C(t),i=d(t);return{width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}}function v(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:N(e.paddingLeft),top:N(e.paddingTop),right:N(e.paddingRight),bottom:N(e.paddingBottom)}}function y(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset}}var n=A(t),s=y(n),o=d(t),a=r(n);return _(t,{top:e.top-s.top-o.top-a.top,left:e.left-s.left-o.left-a.left}),this}function b(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}}return y(t,e),C(t,e),this}function _(t,e){if(void 0==e){var i=A(t),s=o(t),a=o(i),l=(d(t),r(i));return{top:s.top-a.top-l.top,left:s.left-a.left-l.left}}var h={top:e.top,left:e.left};return"static"==n.css(t,"position")&&(h.position="relative"),n.css(t,h),this}function w(t,e){if(void 0===e){var i=A(t),n=a(t),s=o(i),l=(d(t),r(i));return{top:n.top-s.top-l.top,left:n.left-s.left-l.left,width:n.width,height:n.height}}return _(t,e),C(t,e),this}function x(t,e){function i(t,e){var i,n,s=t;for(i=n=0;s&&s!=e&&s.nodeType;)i+=s.offsetLeft||0,n+=s.offsetTop||0,s=s.offsetParent;return{x:i,y:n}}var n,s,r,o,a,l,h=t.parentNode,c=i(t,h);return n=c.x,s=c.y,r=t.offsetWidth,o=t.offsetHeight,a=h.clientWidth,l=h.clientHeight,"end"==e?(n-=a-r,s-=l-o):"center"==e&&(n-=a/2-r/2,s-=l/2-o/2),h.scrollLeft=n,h.scrollTop=s,this}function k(t,e){var i="scrollLeft"in t;return void 0===e?i?t.scrollLeft:t.pageXOffset:(i?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function P(t,e){var i="scrollTop"in t;return void 0===e?i?t.scrollTop:t.pageYOffset:(i?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function C(t,i){if(void 0==i)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?p(document):{width:t.offsetWidth,height:t.offsetHeight};var s="border-box"===n.css(t,"box-sizing"),o={width:i.width,height:i.height};if(!s){var a=v(t),l=r(t);void 0!==o.width&&""!==o.width&&null!==o.width&&(o.width=o.width-a.left-a.right-l.left-l.right),void 0!==o.height&&""!==o.height&&null!==o.height&&(o.height=o.height-a.top-a.bottom-l.top-l.bottom)}return n.css(t,o),this}function S(t,e){return void 0==e?C(t).width:(C(t,{width:e}),this)}function z(){return z}var T,E=/^(?:body|html)$/i,N=e.toPixel,A=i.offsetParent;return e.mixin(z,{borderExtents:r,boundingPosition:o,boundingRect:a,clientHeight:l,clientSize:h,clientWidth:c,contentRect:u,getDocumentSize:p,height:f,marginExtents:d,marginRect:g,marginSize:m,offsetParent:A,paddingExtents:v,pagePosition:y,pageRect:b,relativePosition:_,relativeRect:w,scrollbarWidth:s,scrollIntoView:x,scrollLeft:k,scrollTop:P,size:C,width:S}),function(){function t(t,e,i){return[parseFloat(t[0])*(v.test(t[0])?e/100:1),parseFloat(t[1])*(v.test(t[1])?i/100:1)]}function r(t,e){return parseInt(n.css(t,e),10)||0}function o(t){return 9===t.nodeType?{size:C(t),
offset:{top:0,left:0}}:i.isWindow(t)?{size:C(t),offset:{top:P(t),left:k(t)}}:t.preventDefault?{size:{width:0,height:0},offset:{top:t.pageY,left:t.pageX}}:{size:C(t),offset:y(t)}}function a(t){var e=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-x"),i=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-y"),r="scroll"===e||"auto"===e&&t.width<scrollWidth(t.element),o="scroll"===i||"auto"===i&&t.height<scrollHeight(t.element);return{width:o?s():0,height:r?s():0}}function l(t){var e=t||window,n=i.isWindow(e),s=!!e&&9===e.nodeType,r=!n&&!s,o=m(e);return{element:e,isWindow:n,isDocument:s,offset:r?y(t):{left:0,top:0},scrollLeft:k(e),scrollTop:P(e),width:o.width,height:o.height}}function h(i,n){n=e.extend({},n);var s,h,v,_,w,x,k=n.of,P=l(n.within),C=a(P),S=(n.collision||"flip").split(" "),z={};return x=o(k),k.preventDefault&&(n.at="left top"),h=x.size.width,v=x.size.height,_=x.offset,w=e.extend({},_),e.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=p.test(i[0])?i.concat(["center"]):f.test(i[0])?["center"].concat(i):["center","center"]),i[0]=p.test(i[0])?i[0]:"center",i[1]=f.test(i[1])?i[1]:"center",t=d.exec(i[0]),e=d.exec(i[1]),z[this]=[t?t[0]:0,e?e[0]:0],n[this]=[g.exec(i[0])[0],g.exec(i[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===n.at[0]?w.left+=h:"center"===n.at[0]&&(w.left+=h/2),"bottom"===n.at[1]?w.top+=v:"center"===n.at[1]&&(w.top+=v/2),s=t(z.at,h,v),w.left+=s[0],w.top+=s[1],function(i){var o,a,l=m(i),p=l.width,f=l.height,d=r(i,"marginLeft"),g=r(i,"marginTop"),x=p+d+r(i,"marginRight")+C.width,T=f+g+r(i,"marginBottom")+C.height,E=e.extend({},w),N=t(z.my,l.width,l.height);"right"===n.my[0]?E.left-=p:"center"===n.my[0]&&(E.left-=p/2),"bottom"===n.my[1]?E.top-=f:"center"===n.my[1]&&(E.top-=f/2),E.left+=N[0],E.top+=N[1],o={marginLeft:d,marginTop:g},e.each(["left","top"],function(t,e){b[S[t]]&&b[S[t]][e](E,{targetWidth:h,targetHeight:v,elemWidth:p,elemHeight:f,collisionPosition:o,collisionWidth:x,collisionHeight:T,offset:[s[0]+N[0],s[1]+N[1]],my:n.my,at:n.at,within:P,elem:i})}),n.using&&(a=function(t){var e=_.left-E.left,s=e+h-p,r=_.top-E.top,o=r+v-f,a={target:{element:k,left:_.left,top:_.top,width:h,height:v},element:{element:i,left:E.left,top:E.top,width:p,height:f},horizontal:s<0?"left":e>0?"right":"center",vertical:o<0?"top":r>0?"bottom":"middle"};h<p&&u(e+s)<h&&(a.horizontal="center"),v<f&&u(r+o)<v&&(a.vertical="middle"),c(u(e),u(s))>c(u(r),u(o))?a.important="horizontal":a.important="vertical",n.using.call(this,t,a)}),y(i,e.extend(E,{using:a}))}(i)}var c=Math.max,u=Math.abs,p=/left|center|right/,f=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,g=/^\w+/,v=/%$/,b={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,o=t.left-e.collisionPosition.marginLeft,a=s-o,l=o+e.collisionWidth-r-s;e.collisionWidth>r?a>0&&l<=0?(i=t.left+a+e.collisionWidth-r-s,t.left+=a-i):l>0&&a<=0?t.left=s:a>l?t.left=s+r-e.collisionWidth:t.left=s:a>0?t.left+=a:l>0?t.left-=l:t.left=c(t.left-o,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,o=t.top-e.collisionPosition.marginTop,a=s-o,l=o+e.collisionHeight-r-s;e.collisionHeight>r?a>0&&l<=0?(i=t.top+a+e.collisionHeight-r-s,t.top+=a-i):l>0&&a<=0?t.top=s:a>l?t.top=s+r-e.collisionHeight:t.top=s:a>0?t.top+=a:l>0?t.top-=l:t.top=c(t.top-o,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,r=s.offset.left+s.scrollLeft,o=s.width,a=s.isWindow?s.scrollLeft:s.offset.left,l=t.left-e.collisionPosition.marginLeft,h=l-a,c=l+e.collisionWidth-o-a,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0];h<0?(i=t.left+p+f+d+e.collisionWidth-o-r,(i<0||i<u(h))&&(t.left+=p+f+d)):c>0&&(n=t.left-e.collisionPosition.marginLeft+p+f+d-a,(n>0||u(n)<c)&&(t.left+=p+f+d))},top:function(t,e){var i,n,s=e.within,r=s.offset.top+s.scrollTop,o=s.height,a=s.isWindow?s.scrollTop:s.offset.top,l=t.top-e.collisionPosition.marginTop,h=l-a,c=l+e.collisionHeight-o-a,p="top"===e.my[1],f=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];h<0?(n=t.top+f+d+g+e.collisionHeight-o-r,(n<0||n<u(h))&&(t.top+=f+d+g)):c>0&&(i=t.top-e.collisionPosition.marginTop+f+d+g-a,(i>0||u(i)<c)&&(t.top+=f+d+g))}},flipfit:{left:function(){b.flip.left.apply(this,arguments),b.fit.left.apply(this,arguments)},top:function(){b.flip.top.apply(this,arguments),b.fit.top.apply(this,arguments)}}};z.posit=h}(),t.geom=z}),define("skylark-utils-dom/fx",["./skylark","./langx","./browser","./geom","./styler","./eventer"],function(t,e,i,n,s,r){function o(t,i,o,a,l,c){var u,p,f,d={},g=[],m="",v=this,x=!1,I=!1,H=!1;if(e.isPlainObject(o)&&(a=o.easing,l=o.complete,c=o.delay,o=o.duration),e.isString(o)&&(o=y.speeds[o]),void 0===o&&(o=y.speeds.normal),o/=1e3,y.off&&(o=0),e.isFunction(a)?(l=a,eace="swing"):a=a||"swing",c?c/=1e3:c=0,e.isString(i))d[b]=i,d[_]=o+"s",d[w]=a,p=z;else{for(u in i){var D=i[u];if(E.test(u))m+=u+"("+D+") ";else{if("scrollTop"===u&&(I=!0),"clip"==u&&e.isPlainObject(D)){if(d[u]="rect("+D.top+"px,"+D.right+"px,"+D.bottom+"px,"+D.left+"px)","auto"==s.css(t,"clip")){var O=n.size(t);s.css(t,"clip","rect(0px,"+O.width+"px,"+O.height+"px,0px)"),H=!0}}else d[u]=D;g.push(e.dasherize(u))}}p=T}return m&&(d[N]=m,g.push(N)),o>0&&e.isPlainObject(i)&&(d[k]=g.join(", "),d[P]=o+"s",d[S]=c+"s",d[C]=a),f=function(e){if(x=!0,e){if(e.target!==e.currentTarget)return;r.off(e.target,p,f)}else r.off(t,z,f);s.css(t,A),l&&l.call(this)},o>0&&(r.on(t,p,f),e.debounce(function(){x||f.call(v)},1e3*(o+c)+25)()),t.clientLeft,s.css(t,d),o<=0&&e.debounce(function(){x||f.call(v)},0)(),I&&h(t,i.scrollTop,o,l),this}function a(t,i,n){return s.show(t),i&&(!n&&e.isFunction(i)&&(n=i,i="normal"),s.css(t,"opacity",0),o(t,{opacity:1,scale:"1,1"},i,n)),this}function l(t,i,n){return i?(!n&&e.isFunction(i)&&(n=i,i="normal"),o(t,{opacity:0,scale:"0,0"},i,function(){s.hide(t),n&&n.call(t)})):s.hide(t),this}function h(t,i,n,s){var r=parseInt(t.scrollTop),o=0,a=5,l=1e3*n/a,h=parseInt(i),c=setInterval(function(){o++,o<=l&&(t.scrollTop=(h-r)/l*o+r),o>=l+1&&(clearInterval(c),s&&e.debounce(s,1e3)())},a)}function c(t,e,i){return s.isInvisible(t)?a(t,e,i):l(t,e,i),this}function u(t,e,i,n,s){return o(t,{opacity:i},e,n,s),this}function p(t,e,i,n){var r=s.css(t,"opacity");return r>0?s.css(t,"opacity",0):r=1,s.show(t),u(t,e,r,i,n),this}function f(t,i,n,r){var o,a=s.css(t,"opacity"),l={};return e.isPlainObject(i)?(l.easing=i.easing,l.duration=i.duration,o=i.complete):(l.duration=i,r?(o=r,l.easing=n):o=n),l.complete=function(){s.css(t,"opacity",a),s.hide(t),o&&o.call(t)},u(t,l,0),this}function d(t,e,i,n){return s.isInvisible(t)?p(t,e,easing,callback):f(t,e,easing,callback),this}function g(t,e,i){var n=s.css(t,"position");a(t),s.css(t,{position:"absolute",visibility:"hidden"});var r=s.css(t,"margin-top"),l=s.css(t,"margin-bottom"),h=s.css(t,"padding-top"),c=s.css(t,"padding-bottom"),u=s.css(t,"height");return s.css(t,{position:n,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),o(t,{height:u,marginTop:r,marginBottom:l,paddingTop:h,paddingBottom:c},{duration:e,complete:function(){i&&i.apply(t)}}),this}function m(t,e,i){if(n.height(t)>0){var r=(s.css(t,"position"),s.css(t,"height")),a=s.css(t,"margin-top"),h=s.css(t,"margin-bottom"),c=s.css(t,"padding-top"),u=s.css(t,"padding-bottom");s.css(t,{visibility:"visible",overflow:"hidden",height:r,marginTop:a,marginBottom:h,paddingTop:c,paddingBottom:u}),o(t,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:e,queue:!1,complete:function(){l(t),s.css(t,{visibility:"visible",overflow:"hidden",height:r,marginTop:a,marginBottom:h,paddingTop:c,paddingBottom:u}),i&&i.apply(t)}})}return this}function v(t,e,i){return 0==n.height(t)?g(t,e,i):m(t,e,i),this}function y(){return y}var b,_,w,x,k,P,C,S,z=i.normalizeCssEvent("AnimationEnd"),T=i.normalizeCssEvent("TransitionEnd"),E=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,N=i.css3PropPrefix+"transform",A={};return A[b=i.normalizeCssProperty("animation-name")]=A[_=i.normalizeCssProperty("animation-duration")]=A[x=i.normalizeCssProperty("animation-delay")]=A[w=i.normalizeCssProperty("animation-timing-function")]="",A[k=i.normalizeCssProperty("transition-property")]=A[P=i.normalizeCssProperty("transition-duration")]=A[S=i.normalizeCssProperty("transition-delay")]=A[C=i.normalizeCssProperty("transition-timing-function")]="",e.mixin(y,{off:!1,speeds:{normal:400,fast:200,slow:600},animate:o,fadeIn:p,fadeOut:f,fadeTo:u,fadeToggle:d,hide:l,scrollToTop:h,slideDown:g,slideToggle:v,slideUp:m,show:a,toggle:c}),t.fx=y}),define("skylark-utils-dom/query",["./skylark","./langx","./noder","./datax","./eventer","./finder","./geom","./styler","./fx"],function(t,e,i,n,s,r,o,a,l){function h(t,i){return function(){var n=this,s=_.call(arguments),r=e.map(n,function(e,n){return t.apply(i,[e].concat(s))});return O(E(r))}}function c(t,e,i){return function(n){var s=(_.call(arguments),this.map(function(s,r){if(r.querySelector)return t.apply(e,i?[r]:[r,n])}));return i&&n?s.filter(n):s}}function u(t,e,i){return function(n,s){_.call(arguments);void 0===s&&(s=n,n=void 0);var r=this.map(function(r,o){if(o.querySelector)return t.apply(e,i?[o,n]:[o,s,n])});return i&&s?r.filter(s):r}}function p(t,e){return function(){var i=this,n=_.call(arguments);return this.each(function(i){t.apply(e,[this].concat(n))}),i}}function f(t,e,i){return function(n){var s=this,r=_.call(arguments);return x.call(s,function(s,o){S(s,n,o,i(s));t.apply(e,[s,n].concat(r.slice(1)))}),s}}function d(t,e){return function(){var i=this,n=_.call(arguments);return y.call(i,function(i){return t.apply(e,[i].concat(n))})}}function g(t,i,n){return function(s,r){var o=this,a=_.call(arguments);return e.isPlainObject(s)||e.isDefined(r)?(x.call(o,function(e,o){var l;l=n?S(e,r,o,n(e,s)):r,t.apply(i,[e].concat(a))}),o):o[0]?t.apply(i,[o[0],s]):void 0}}function m(t,i,n){return function(s){var r=this;return e.isDefined(s)?(x.call(r,function(e,r){var o;o=n?S(e,s,r,n(e)):s,t.apply(i,[e,o])}),r):r[0]?t.apply(i,[r[0]]):void 0}}var v,y=Array.prototype.some,b=Array.prototype.push,_=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),w=(Array.prototype.map,Array.prototype.filter),x=Array.prototype.forEach,k=Array.prototype.indexOf,P=Array.prototype.sort,C=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,S=e.funcArg,z=e.isArrayLike,T=e.isString,E=e.uniq,N=e.isFunction,A=e.type,I=e.isArray,H=(e.isWindow,e.isDocument,e.isObject),D=(e.isPlainObject,e.compact,e.flatten,e.camelCase,e.dasherize,r.children,e.klass({klassName:"SkNodeList",init:function(t,n){var s,o,a,l,h=this;if(t&&(h.context=n=n||i.doc(),T(t)?(h.selector=t,s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:C.exec(t),s?s[1]?(o=i.createFragment(t),e.isPlainObject(n)&&(l=n)):(a=r.byId(s[2],i.ownerDoc(n)),a&&(o=[a])):(e.isString(n)&&(n=r.find(n)),o=r.descendants(n,t))):o=I(t)?t:[t]),o&&(b.apply(h,o),l))for(var c in l)e.isFunction(this[c])?this[c](l[c]):this.attr(c,l[c]);return h}})),O=function(){function t(t,n,s){return function(s){var r,o=e.map(arguments,function(t){return r=A(t),"object"==r||"array"==r||null==t?t:i.createFragment(t)});return o.length<1?this:(this.each(function(e){t.apply(n,[this,o,e>0])}),this)}}v=function(t){return t instanceof D},init=function(t,e){return new D(t,e)};var C=function(t,e){return N(t)?void s.ready(function(){t(C)}):v(t)?t:e&&v(e)&&T(t)?e.find(t):init(t,e)};C.fn=D.prototype,e.mixin(C.fn,{length:0,map:function(t){return C(E(e.map(this,function(e,i){return t.call(e,i,e)})))},slice:function(){return C(_.apply(this,arguments))},forEach:function(){return x.apply(this,arguments)},get:function(t){return void 0===t?_.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return k.apply(this,arguments)},sort:function(){return P.apply(this,arguments)},toArray:function(){return _.call(this)},size:function(){return this.length},remove:p(i.remove,i),each:function(t){return e.each(this,t),this},filter:function(t){return N(t)?this.not(this.not(t)):C(w.call(this,function(e){return r.matches(e,t)}))},add:function(t,e){return C(E(this.toArray().concat(C(t,e).toArray())))},is:function(t){if(this.length>0){var i=this;if(e.isString(t))return y.call(i,function(e){return r.matches(e,t)});if(e.isArrayLike(t))return y.call(i,function(i){return e.inArray(i,t)>-1});if(e.isHtmlNode(t))return y.call(i,function(e){return e==t})}return!1},not:function(t){var e=[];if(N(t)&&void 0!==t.call)this.each(function(i){t.call(this,i)||e.push(this)});else{var i="string"==typeof t?this.filter(t):z(t)&&N(t.item)?_.call(t):C(t);this.forEach(function(t){i.indexOf(t)<0&&e.push(t)})}return C(e)},has:function(t){return this.filter(function(){return H(t)?i.contains(this,t):C(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:c(r.descendants,r),closest:c(r.closest,r),parents:c(r.ancestors,r),parentsUntil:u(r.ancestors,r),parent:c(r.parent,r),children:c(r.children,r),contents:h(i.contents,i),empty:p(i.empty,i),pluck:function(t){return e.map(this,function(e){return e[t]})},pushStack:function(t){var e=C(t);return e.prevObject=this,e},show:p(l.show,l),replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=N(t);if(this[0]&&!e)var i=C(t).get(0),n=i.parentNode||this.length>1;return this.each(function(s){C(this).wrapAll(e?t.call(this,s):n?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){C(this[0]).before(t=C(t));for(var e;(e=t.children()).length;)t=e.first();C(t).append(this)}return this},wrapInner:function(t){var e=N(t);return this.each(function(i){var n=C(this),s=n.contents(),r=e?t.call(this,i):t;s.length?s.wrapAll(r):n.append(r)})},unwrap:function(t){return 0===this.parent().children().length?this.parent(t).not("body").each(function(){C(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:p(l.hide,l),toggle:function(t){return this.each(function(){var e=C(this);(void 0===t?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return C(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:c(r.previousSibling,r),next:function(t){return C(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:c(r.nextSiblings,r),siblings:c(r.siblings,r),html:m(i.html,i,i.html),text:m(n.text,n,n.text),attr:g(n.attr,n,n.attr),removeAttr:p(n.removeAttr,n),prop:g(n.prop,n,n.prop),removeProp:p(n.removeProp,n),data:g(n.data,n,n.data),removeData:p(n.removeData,n),val:m(n.val,n,n.val),offset:m(o.pagePosition,o,o.pagePosition),style:g(a.css,a),css:g(a.css,a),index:function(t){return t?this.indexOf(C(t)[0]):this.parent().children().indexOf(this[0])},hasClass:d(a.hasClass,a),addClass:f(a.addClass,a,a.className),removeClass:f(a.removeClass,a,a.className),toggleClass:f(a.toggleClass,a,a.className),scrollTop:m(o.scrollTop,o),scrollLeft:m(o.scrollLeft,o),position:function(t){if(this.length){if(t)return t.of&&t.of.length&&(t=e.clone(t),t.of=t.of[0]),this.each(function(){o.posit(this,t)});var i=this[0];return o.relativePosition(i)}},offsetParent:h(o.offsetParent,o)}),C.fn.detach=C.fn.remove,C.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)},C.fn.size=m(o.size,o),C.fn.width=m(o.width,o,o.width),C.fn.height=m(o.height,o,o.height),C.fn.clientSize=m(o.clientSize,o.clientSize),["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});C.fn["outer"+e]=function(e,i){if(arguments.length?"boolean"!=typeof e&&(i=e,e=!1):(e=!1,i=void 0),void 0===i){var n=this[0];if(!n)return;var s=o.size(n);if(e){var r=o.marginExtents(n);s.width=s.width+r.left+r.right,s.height=s.height+r.top+r.bottom}return"width"===t?s.width:s.height}return this.each(function(n,s){var r={},a=o.marginExtents(s);"width"===t?(r.width=i,e&&(r.width=r.width-a.left-a.right)):(r.height=i,e&&(r.height=r.height-a.top-a.bottom)),o.size(s,r)})}}),C.fn.innerWidth=m(o.clientWidth,o,o.clientWidth),C.fn.innerHeight=m(o.clientHeight,o,o.clientHeight);i.traverse;return C.fn.after=t(i.after,i),C.fn.prepend=t(i.prepend,i),C.fn.before=t(i.before,i),C.fn.append=t(i.append,i),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){C.fn[t]=function(t){for(var i,n=[],s=C(t),r=s.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),C(s[o])[e](i),b.apply(n,i.get());return this.pushStack(n)}}),C}();return function(t){t.fn.on=p(s.on,s),t.fn.off=p(s.off,s),t.fn.trigger=p(s.trigger,s),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error transitionEnd".split(" ").forEach(function(e){t.fn[e]=function(t,i){return 0 in arguments?this.on(e,t,i):this.trigger(e)}}),t.fn.one=function(t,i,n,s){return e.isString(i)||e.isFunction(s)||(s=n,n=i,i=null),e.isFunction(n)&&(s=n,n=null),this.on(t,i,n,s,1)},t.fn.animate=p(l.animate,l),t.fn.show=p(l.show,l),t.fn.hide=p(l.hide,l),t.fn.toogle=p(l.toogle,l),t.fn.fadeTo=p(l.fadeTo,l),t.fn.fadeIn=p(l.fadeIn,l),t.fn.fadeOut=p(l.fadeOut,l),t.fn.fadeToggle=p(l.fadeToggle,l),t.fn.slideDown=p(l.slideDown,l),t.fn.slideToggle=p(l.slideToggle,l),t.fn.slideUp=p(l.slideUp,l),t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)}}(O),function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(e){var i=t.fn[e];t.fn[e]=function(){var t=i.apply(this,arguments);return t.prevObject=this,t}})}(O),function(t){t.fn.query=t.fn.find,t.fn.place=function(t,n){return e.isString(t)?t=r.descendant(t):v(t)&&(t=t[0]),this.each(function(e,s){switch(n){case"before":i.before(t,s);break;case"after":i.after(t,s);break;case"replace":i.replace(t,s);break;case"only":i.empty(t),i.append(t,s);break;case"first":i.prepend(t,s);break;default:i.append(t,s)}})},t.fn.addContent=function(t,i){return t.template&&(t=e.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.disableSelection=function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")}}(O),O.fn.plugin=function(t,e){var i=_.call(arguments,1),n=this,s=this;return this.each(function(){s=plugins.instantiate.apply(n,[this,t].concat(i))}),s},t.query=O}),define("skylark-utils-dom/velm",["./skylark","./langx","./datax","./eventer","./finder","./fx","./geom","./noder","./styler"],function(t,e,i,n,s,r,o,a,l){function h(t,i){return function(){var n=this,s=n.domNode,r=t.apply(i,[s].concat(u.call(arguments)));if(r){if(r===i)return n;r instanceof HTMLElement?r=new p(r):e.isArrayLike(r)&&(r=c.call(r,function(t){return t instanceof HTMLElement?new p(r):t}))}return r}}var c=Array.prototype.map,u=Array.prototype.slice,p=e.klass({klassName:"VisualElement",init:function(t){e.isString(t)&&(t=document.getElementById(t)),this.domNode=t}}),f=new p(document.body),d=function(t){return t?new p(t):f};e.mixin(d,{batch:function(t,e,i){return t.forEach(function(t){var n=t instanceof p?t:d(t);n[e].apply(n,i)}),this},root:new p(document.body),VisualElement:p,partial:function(t,e){var i={};i[t]=e,p.partial(i)},delegate:function(t,e){var i={};t.forEach(function(t){i[t]=h(e[t],e)}),p.partial(i)}}),d.delegate(["attr","data","prop","removeAttr","removeData","text","val"],i),d.delegate(["off","on","one","shortcuts","trigger"],n),d.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],s),d.find=function(t){return"body"===t?this.root:this.root.descendant(t)},d.delegate(["animate","fadeIn","fadeOut","fadeTo","fadeToggle","hide","scrollToTop","show","toggle"],r),d.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","size","width"],o),d.delegate(["after","append","before","clone","contains","contents","empty","html","isChildOf","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],a),d.delegate(["addClass","className","css","hasClass","hide","isInvisible","removeClass","show","toggleClass"],l);var g=["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"];g.forEach(function(t){var e=t;p.prototype[e]=function(e){return this.css(t,e),this}});var m=["keyUp","keyDown","mouseOver","mouseOut","click","dblClick","change"];return m.forEach(function(t){var e=t;p.prototype[e]=function(e){return this.on(t.toLowerCase(),e),this}}),t.velm=d}),define("skylark-utils-dom/plugins",["skylark-langx/skylark","skylark-langx/klass","./langx","./noder","./datax","./eventer","./finder","./geom","./styler","./fx","./query","./velm"],function(t,e,i,n,s,r,o,a,l,h,c,u){"use strict";function p(t,e){var i=t.prototype.pluginName;m[i]=t,e&&u.partial(e,c.fn[e]=function(t){var e=g.call(arguments,0);return e.unshift(i),this.plugin.apply(this,e)})}function f(t,e,n){var r=s.data(t,e);if("instance"===n)return r;var o="string"==typeof n,a=g.call(arguments,2),l=this;if(o){var h=n;return r?i.isFunction(r[h])&&"_"!==h.charAt(0)?r[h].apply(r,a):i.error("no such method '"+h+"' for "+e+" plugin instance"):i.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+h+"'")}if(a.length&&(n=i.mixin.apply(i,[{},n].concat(a))),r)r.option(n||{});else{var c=m[e];s.data(t,e,new c(n,t))}return l}function d(){return d}var g=Array.prototype.slice,m=(Array.prototype.concat,{}),v=0,y=i.Evented.inherit({klassName:"Plugin",pluginEventPrefix:"",options:{create:null},_construct:function(t,e){e=c(e||this.defaultElement||this)[0],this.element=c(e),this.uuid=v++,this.eventNamespace="."+this.pluginName+this.uuid,this.bindings=c(),this.classesElementLookup={},e!==this&&(s.data(e,this.pluginName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow)),this._initOptions(t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_initOptions:function(t){var e=this.constructor,n=e.cache=e.cache||{},s=n.defaults;if(!s){var r=[];do{if(r.unshift(e),e===y)break;e=e.superclass}while(e);s=n.defaults={};for(var o=0;o<r.length;o++)e=r[o],e.prototype.hasOwnProperty("options")&&i.mixin(s,e.prototype.options)}return this.options=i.mixin(s,t)},_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.off(this.eventNamespace).removeData(this.pluginName),this.plugin().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:i.noop,_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},option:function(t,e){var n,s,r,o=t;if(0===arguments.length)return i.mixin({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(s=o[t]=i.mixin({},this.options[t]),r=0;r<n.length-1;r++)s[n[r]]=s[n[r]]||{},s=s[n[r]];if(t=n.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this}});return c.fn.plugin=function(t,e){var i=g.call(arguments,1),n=this,s=this;return this.each(function(){s=f.apply(n,[this,t].concat(i))}),s},u.partial("plugin",function(t,e){var i=g.call(arguments,1);return f.apply(this,[this,t].concat(i))}),i.mixin(d,{instantiate:f,Plugin:y,register:p}),d}),define("skylark-jqueryui-interact/JqueryPlugin",["skylark-langx/types","skylark-langx/objects","skylark-langx/arrays","skylark-langx/langx","skylark-utils-dom/eventer","skylark-utils-dom/plugins","skylark-utils-dom/query"],function(t,e,i,n,s,r,o){var a=r.Plugin.inherit({klassName:"JqPlugin",_classes:function(t){function i(){t.element.each(function(t,e){var i=n.map(a.classesElementLookup,function(t){return t}).some(function(t){return o(t).is(e)});i||a._on(o(e),{remove:"_untrackClassesElement"})})}function s(e,s){var l,h;for(h=0;h<e.length;h++)l=a.classesElementLookup[e[h]]||o(),t.add?(i(),l=o(n.uniq(l.get().concat(t.element.get())))):l=o(l.not(t.element).get()),a.classesElementLookup[e[h]]=l,r.push(e[h]),s&&t.classes[e[h]]&&r.push(t.classes[e[h]])}var r=[],a=this;return t=e.mixin({element:this.element,classes:this.options.classes||{}},t),t.keys&&s(t.keys.match(/\S+/g)||[],!0),t.extra&&s(t.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(t){var e=this;n.each(e.classesElementLookup,function(n,s){i.inArray(t.target,s)!==-1&&(e.classesElementLookup[n]=o(s.not(t.target).get()))}),this._off(o(t.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,r={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(t,i,n){var s,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=o(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(e,n){function a(){if(t||r.options.disabled!==!0&&!o(this).hasClass("ui-state-disabled"))return("string"==typeof n?r[n]:n).apply(r,arguments)}"string"!=typeof n&&(a.guid=n.guid=n.guid||a.guid||o.guid++);var l=e.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+r.eventNamespace,c=l[2];c?s.on(h,c,a):i.on(h,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e),this.bindings=o(this.bindings.not(t).get()),this.focusable=o(this.focusable.not(t).get()),this.hoverable=o(this.hoverable.not(t).get())},_trigger:function(e,i,n){var r,o,a=this.options[e];if(n=n||{},i=s.proxy(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}});return a}),define("skylark-jqueryui-interact/Mouse",["skylark-utils-dom/browser","skylark-utils-dom/datax","skylark-utils-dom/query","skylark-utils-dom/plugins","./JqueryPlugin"],function(t,e,i,n,s){var r=!1;i(document).on("mouseup",function(){r=!1});var o=s.inherit({klassName:"MousePlugin",pluginName:"ui.mouse",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.pluginName,function(e){return t._mouseDown(e)}).on("click."+this.pluginName,function(i){if(!0===e.data(i.target,t.pluginName+".preventClickEvent"))return e.removeData(i.target,t.pluginName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.pluginName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.pluginName,this._mouseMoveDelegate).off("mouseup."+this.pluginName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,s=1===t.which,o=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&i(t.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.pluginName+".preventClickEvent")&&e.removeData(t.target,this.pluginName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.pluginName,this._mouseMoveDelegate).on("mouseup."+this.pluginName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.pluginName,this._mouseMoveDelegate).off("mouseup."+this.pluginName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.pluginName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});return n.register(o),o}),define("skylark-jqueryui-interact/patch",[],function(){return{add:function(t,e,i){var n,s=t.prototype;for(n in i)s.patches[n]=s.patches[n]||[],s.patches[n].push([e,i[n]])},call:function(t,e,i,n){var s,r=t.patches[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<r.length;s++)t.options[r[s][0]]&&r[s][1].apply(t.element,i)}}}),define("skylark-jqueryui-interact/Draggable",["skylark-utils-dom/langx","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse","./patch","./ddmanager"],function(t,e,i,n,s,r,o,a){var l=r.inherit({klassName:"Draggable",pluginName:"ui.draggable",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,
grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||n(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(e.iframeFix===!0?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=i.active(this.document[0]),s=n(t.target);s.closest(e).length||i.blur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a&&(a.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===n(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a&&!e.dropBehaviour&&a.prepareOffsets(this,t),this._mouseDrag(t,!0),a&&a.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp(new e.create("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a&&a.drag(this,t),!1},_mouseStop:function(e){var i=this,s=!1;return a&&!this.options.dropBehaviour&&(s=a.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),a&&a.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),this.overrided(t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(e.create("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!n(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),r=s?n(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&i.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,s=this.options,r=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,n(r).width()-this.helperProportions.width-this.margins.left,(n(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),e=n(s.containment),i=e[0],void(i&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,r,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s,r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-o.grid[0]:r+o.grid[0]:r),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,i){return i=i||this._uiHash(),o.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),this.overrided(t,e,i)},patches:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});return s.register(l,"draggable"),o.add(l,"connectToSortable",{start:function(e,i,s){var r=t.extend({},i,{item:s.element});s.sortables=[],n(s.options.connectToSortable).each(function(){var t=n(this).sortable("instance");t&&!t.options.disabled&&(s.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,r))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))})},drag:function(e,n,s){t.each(s.sortables,function(){var r=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&i.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,s._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(s._parent),s._refreshOffsets(e),n.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),o.add(l,"cursor",{start:function(t,e,i){var s=n("body"),r=i.options;s.css("cursor")&&(r._cursor=s.css("cursor")),s.css("cursor",r.cursor)},stop:function(t,e,i){var s=i.options;s._cursor&&n("body").css("cursor",s._cursor)}}),o.add(l,"opacity",{start:function(t,e,i){var s=n(e.helper),r=i.options;s.css("opacity")&&(r._opacity=s.css("opacity")),s.css("opacity",r.opacity)},stop:function(t,e,i){var s=i.options;s._opacity&&n(e.helper).css("opacity",s._opacity)}}),o.add(l,"scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var s=i.options,r=!1,o=i.scrollParentNotHidden[0],l=i.document[0];o!==l&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<s.scrollSensitivity?o.scrollTop=r=o.scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<s.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-n(l).scrollTop()<s.scrollSensitivity?r=n(l).scrollTop(n(l).scrollTop()-s.scrollSpeed):n(window).height()-(t.pageY-n(l).scrollTop())<s.scrollSensitivity&&(r=n(l).scrollTop(n(l).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-n(l).scrollLeft()<s.scrollSensitivity?r=n(l).scrollLeft(n(l).scrollLeft()-s.scrollSpeed):n(window).width()-(t.pageX-n(l).scrollLeft())<s.scrollSensitivity&&(r=n(l).scrollLeft(n(l).scrollLeft()+s.scrollSpeed)))),r!==!1&&a&&!s.dropBehaviour&&a.prepareOffsets(i,t)}}),o.add(l,"snap",{start:function(t,e,i){var s=i.options;i.snapElements=[],n(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var t=n(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(e,n,s){var r,o,a,l,h,c,u,p,f,d,g=s.options,m=g.snapTolerance,v=n.offset.left,y=v+s.helperProportions.width,b=n.offset.top,_=b+s.helperProportions.height;for(f=s.snapElements.length-1;f>=0;f--)h=s.snapElements[f].left-s.margins.left,c=h+s.snapElements[f].width,u=s.snapElements[f].top-s.margins.top,p=u+s.snapElements[f].height,y<h-m||v>c+m||_<u-m||b>p+m||!i.contains(s.snapElements[f].item.ownerDocument,s.snapElements[f].item)?(s.snapElements[f].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[f].item})),s.snapElements[f].snapping=!1):("inner"!==g.snapMode&&(r=Math.abs(u-_)<=m,o=Math.abs(p-b)<=m,a=Math.abs(h-y)<=m,l=Math.abs(c-v)<=m,r&&(n.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),o&&(n.position.top=s._convertPositionTo("relative",{top:p,left:0}).top),a&&(n.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),l&&(n.position.left=s._convertPositionTo("relative",{top:0,left:c}).left)),d=r||o||a||l,"outer"!==g.snapMode&&(r=Math.abs(u-b)<=m,o=Math.abs(p-_)<=m,a=Math.abs(h-v)<=m,l=Math.abs(c-y)<=m,r&&(n.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top),a&&(n.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),l&&(n.position.left=s._convertPositionTo("relative",{top:0,left:c-s.helperProportions.width}).left)),!s.snapElements[f].snapping&&(r||o||a||l||d)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[f].item})),s.snapElements[f].snapping=r||o||a||l||d)}}),o.add(l,"stack",{start:function(e,i,s){var r,o=s.options,a=t.makeArray(n(o.stack)).sort(function(t,e){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(e).css("zIndex"),10)||0)});a.length&&(r=parseInt(n(a[0]).css("zIndex"),10)||0,n(a).each(function(t){n(this).css("zIndex",r+t)}),this.css("zIndex",r+a.length))}}),o.add(l,"zIndex",{start:function(t,e,i){var s=n(e.helper),r=i.options;s.css("zIndex")&&(r._zIndex=s.css("zIndex")),s.css("zIndex",r.zIndex)},stop:function(t,e,i){var s=i.options;s._zIndex&&n(e.helper).css("zIndex",s._zIndex)}}),l}),define("skylark-jqueryui-interact/Droppable",["skylark-utils-dom/langx","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./JqueryPlugin","./patch","./ddmanager"],function(t,e,i,n,s,r,o,a){var l=r.inherit({klassName:"Droppable",pluginName:"ui.Droppable",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){a.droppables[t]=a.droppables[t]||[],a.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=a.droppables[this.options.scope];this._splice(t)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=a.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(t){var e=a.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=a.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=a.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=a.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,i){var s=i||a.current,r=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=n(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&a.intersect(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});return s.register(l,"droppable"),l}),define("skylark-jqueryui-interact/Resizable",["skylark-utils-dom/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse","./patch","./ddmanager"],function(t,e,i,n,s,r,o,a,l){var h=o.inherit({klassName:"Resizable",pluginName:"ui.resizable",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===s(t).css("overflow"))return!1;var i=e&&"left"===e?"scrollLeft":"scrollTop",n=!1;return t[i]>0||(t[i]=1,n=t[i]>0,t[i]=0,n)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(s("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&s(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var t,e=function(t){s(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!e}},_setupHandles:function(){var e,i,n,r,o,a=this.options,l=this;if(this.handles=a.handles||(s(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=s(),this._addedHandles=s(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)e=t.trim(n[i]),r="ui-resizable-"+e,o=s("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.children(this.handles[e]).length||(this.element.append(o),this._addedHandles=this._addedHandles.add(o));this._renderAxis=function(t){var e,i,n,r;t=t||this.element;for(e in this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=s(this.handles[e]),this._on(this.handles[e],{mousedown:l._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=s(this.handles[e],this.element),r=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(n,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){l.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var e,i,r=!1;for(e in this.handles)i=s(this.handles[e])[0],(i===t.target||n.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var e,i,n,r=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(e+=s(r.containment).scrollLeft()||0,i+=s(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=s(".ui-resizable-"+this.axis).css("cursor"),s("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,r=this.axis,o=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,o,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,r,o,a,l,h,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,o=n?0:u.sizeDiff.width,a={width:u.helper.width()-o,height:u.helper.height()-r},l=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,h=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(a,{top:h,left:l})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),s("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,r,o=this.options;r={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),o&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),r&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),o&&c&&(t.top=l-e.minHeight),s&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(s[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||s("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;
return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(t,e){a.call(this,t,[e,this.ui(),this],!0),"resize"!==t&&this._trigger(t,e,this.ui())},patches:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});return a.add(h,"animate",{stop:function(e){var i=s(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,l=o?0:i.sizeDiff.width,h={width:i.size.width-l,height:i.size.height-a},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&s(r[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),a.add(h,"containment",{start:function(){var t,e,i,n,r,o,a,l=s(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,p=u instanceof s?u.get(0):/parent/.test(u)?c.parent().get(0):u;p&&(l.containerElement=s(p),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:s(document),left:0,top:0,width:s(document).width(),height:s(document).height()||document.body.parentNode.scrollHeight}):(t=s(p),e=[],s(["Top","Right","Left","Bottom"]).each(function(i,n){e[i]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-e[3],width:t.innerWidth()-e[1]},i=l.containerOffset,n=l.containerSize.height,r=l.containerSize.width,o=l._hasScroll(p,"left")?p.scrollWidth:r,a=l._hasScroll(p)?p.scrollHeight:n,l.parentData={element:p,left:i.left,top:i.top,width:o,height:a}))},resize:function(t){var e,i,n,r,o=s(this).resizable("instance"),a=o.options,l=o.containerOffset,h=o.position,c=o._aspectRatio||t.shiftKey,u={top:0,left:0},p=o.containerElement,f=!0;p[0]!==document&&/static/.test(p.css("position"))&&(u=l),h.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio,f=!1),o.position.left=a.helper?l.left:0),h.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio,f=!1),o.position.top=o._helper?l.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),n&&r?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-l.left)),i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-l.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,c&&(o.size.height=o.size.width/o.aspectRatio,f=!1)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,c&&(o.size.width=o.size.height*o.aspectRatio,f=!1)),f||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=s(this).resizable("instance"),e=t.options,i=t.containerOffset,n=t.containerPosition,r=t.containerElement,o=s(t.helper),a=o.offset(),l=o.outerWidth()-t.sizeDiff.width,h=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(r.css("position"))&&s(this).css({left:a.left-n.left-i.left,width:l,height:h}),t._helper&&!e.animate&&/static/.test(r.css("position"))&&s(this).css({left:a.left-n.left-i.left,width:l,height:h})}}),a.add(h,"alsoResize",{start:function(){var t=s(this).resizable("instance"),e=t.options;s(e.alsoResize).each(function(){var t=s(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(e,i){var n=s(this).resizable("instance"),r=n.options,o=n.originalSize,a=n.originalPosition,l={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0};s(r.alsoResize).each(function(){var e=s(this),n=s(this).data("ui-resizable-alsoresize"),r={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(l[e]||0);i&&i>=0&&(r[e]=i||null)}),e.css(r)})},stop:function(){s(this).removeData("ui-resizable-alsoresize")}}),a.add(h,"ghost",{start:function(){var t=s(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),t.ghost.appendTo(t.helper)},resize:function(){var t=s(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=s(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),a.add(h,"grid",{resize:function(){var t,e=s(this).resizable("instance"),i=e.options,n=e.size,r=e.originalSize,o=e.originalPosition,a=e.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-r.width)/h)*h,p=Math.round((n.height-r.height)/c)*c,f=r.width+u,d=r.height+p,g=i.maxWidth&&i.maxWidth<f,m=i.maxHeight&&i.maxHeight<d,v=i.minWidth&&i.minWidth>f,y=i.minHeight&&i.minHeight>d;i.grid=l,v&&(f+=h),y&&(d+=c),g&&(f-=h),m&&(d-=c),/^(se|s|e)$/.test(a)?(e.size.width=f,e.size.height=d):/^(ne)$/.test(a)?(e.size.width=f,e.size.height=d,e.position.top=o.top-p):/^(sw)$/.test(a)?(e.size.width=f,e.size.height=d,e.position.left=o.left-u):((d-c<=0||f-h<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),d-c>0?(e.size.height=d,e.position.top=o.top-p):(d=c-t.height,e.size.height=d,e.position.top=o.top+r.height-d),f-h>0?(e.size.width=f,e.position.left=o.left-u):(f=h-t.width,e.size.width=f,e.position.left=o.left+r.width-f))}}),r.register(h,"resizable"),h}),define("skylark-jqueryui-interact/Selectable",["skylark-utils-dom/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse"],function(t,e,i,n,s,r,o){var a=o.inherit({klassName:"Selectable",pluginName:"ui.selectable",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=s(t.element[0]).offset(),t.selectees=s(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var i=s(this),n=i.offset(),r={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:r.left,top:r.top,right:r.left+i.outerWidth(),bottom:r.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=s("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=s(this.element[0]).offset(),this.options.disabled||(this.selectees=s(n.filter,this.element[0]),this._trigger("start",t),s(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),s(t.target).parents().addBack().each(function(){var n,s=e.data(this,"selectable-item");if(s)return n=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),i._removeClass(s.$element,n?"ui-unselecting":"ui-selected")._addClass(s.$element,n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,r=this.opos[0],o=this.opos[1],a=t.pageX,l=t.pageY;return r>a&&(i=a,a=r,r=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:r,top:o,width:a-r,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),h=!1,c={};i&&i.element!==n.element[0]&&(c.left=i.left+n.elementPos.left,c.right=i.right+n.elementPos.left,c.top=i.top+n.elementPos.top,c.bottom=i.bottom+n.elementPos.top,"touch"===s.tolerance?h=!(c.left>a||c.right<r||c.top>l||c.bottom<o):"fit"===s.tolerance&&(h=c.left>r&&c.right<a&&c.top>o&&c.bottom<l),h?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,s(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),s(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}});return r.register(a,"selectable"),a}),define("skylark-jqueryui-interact/Sortable",["skylark-utils-dom/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse","./ddmanager"],function(t,e,i,n,s,r,o,a){var l=o.inherit({klassName:"Sortable",pluginName:"ui.sortable",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.pluginName+"-item");return this},_mouseCapture:function(t,i){var n=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),s(t.target).parents().each(function(){if(e.data(this,o.pluginName+"-item")===o)return n=s(this),!1}),e.data(t.target,o.pluginName+"-item")===o&&(n=s(t.target)),!!n&&(!(this.options.handle&&!i&&(s(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var r,o,l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=s("parent"!==l.appendTo?l.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),t.extend(this.offset,{parent:this._getParentOffset()}),l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",l.cursor),this.storedStylesheet=s("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(o)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return a&&(a.current=this),a&&!l.dropBehaviour&&a.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(t){var e=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-this.document.scrollTop()<e.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<e.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),t.pageX-this.document.scrollLeft()<e.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<e.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),i},_mouseDrag:function(t){var e,i,s,r,o=this.options;if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),this._contactContainers(t),null!==this.innermostContainer)for(o.scroll&&this._scroll(t)!==!1&&(this._refreshItemPositions(!0),a&&!o.dropBehaviour&&a.prepareOffsets(this,t)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},e=this.items.length-1;e>=0;e--)if(i=this.items[e],s=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===s||n.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&n.contains(this.element[0],s))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return a&&a.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(a&&!this.options.dropBehaviour&&a.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,s(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new i.create("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?s(this.domPosition.prev).after(this.currentItem):s(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},s(e).each(function(){var e=(s(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(s(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||n+h>a&&n+h<l,p="y"===this.options.axis||e+c>r&&e+c<o,f=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&s;return!!r&&(e=this.dragDirection.vertical,i=this.dragDirection.horizontal,this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this.dragDirection.vertical,s=this.dragDirection.horizontal;return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(i){function n(){h.push(this)}var r,o,a,l,h=[],c=[],u=this._connectWith();if(u&&i)for(r=u.length-1;r>=0;r--)for(a=s(u[r],this.document[0]),o=a.length-1;o>=0;o--)l=e.data(a[o],this.pluginName),l&&l!==this&&!l.options.disabled&&c.push([t.isFunction(l.options.items)?l.options.items.call(l.element):s(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l]);for(c.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):s(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=c.length-1;r>=0;r--)c[r][0].each(n);return s(h)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.pluginName+"-item)");this.items=this.items.filter(function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(i){this.items=[],this.containers=[this];var n,r,o,a,l,h,c,u,p=this.items,f=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],i,{item:this.currentItem}):s(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=s(d[n],this.document[0]),r=o.length-1;r>=0;r--)a=e.data(o[r],this.pluginName),a&&a!==this&&!a.options.disabled&&(f.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],i,{item:this.currentItem}):s(a.options.items,a.element),a]),this.containers.push(a));for(n=f.length-1;n>=0;n--)for(l=f[n][1],h=f[n][0],r=0,u=h.length;r<u;r++)c=s(h[r]),c.data(this.pluginName+"-item",l),p.push({item:c,instance:l,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(t){var e,i,n,r;for(e=this.items.length-1;e>=0;e--)i=this.items[e],this.currentContainer&&i.instance!==this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?s(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),r=n.offset(),i.left=r.left,i.top=r.top)},refreshPositions:function(t){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),null!==this.innermostContainer&&this._refreshItemPositions(t);var e,i;if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;e>=0;e--)i=this.containers[e].element.offset(),this.containers[e].containerCache.left=i.left,this.containers[e].containerCache.top=i.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var e,i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(e=n.placeholder,i=t.currentItem[0].nodeName.toLowerCase(),n.placeholder={element:function(){var n=s("<"+i+">",t.document[0]);return t._addClass(n,"ui-sortable-placeholder",e||t.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),s("<tr>",t.document[0]).appendTo(n)):"tr"===i?t._createTrPlaceholder(t.currentItem,n):"img"===i&&n.attr("src",t.currentItem.attr("src")),e||n.css("visibility","hidden"),n},update:function(s,r){e&&!n.forcePlaceholderSize||(r.height()&&(!n.forcePlaceholderSize||"tbody"!==i&&"tr"!==i)||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=s(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){s("<td>&#160;</td>",i.document[0]).attr("colspan",s(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,s,r,o,a,l,h,c,u,p=null,f=null;for(e=this.containers.length-1;e>=0;e--)if(!n.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(p&&n.contains(this.containers[e].element[0],p.element[0]))continue;p=this.containers[e],f=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(this.innermostContainer=p,p)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(s=1e4,r=null,c=p.floating||this._isFloating(this.currentItem),o=c?"left":"top",a=c?"width":"height",u=c?"pageX":"pageY",i=this.items.length-1;i>=0;i--)n.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[o],h=!1,t[u]-l>this.items[i][a]/2&&(h=!0),Math.abs(t[u]-l)<s&&(s=Math.abs(t[u]-l),r=this.items[i],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?s(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||this.appendTo[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=s(n.containment)[0],e=s(n.containment).offset(),i="hidden"!==s(t).css("overflow"),this.containment=[e.left+(parseInt(s(t).css("borderLeftWidth"),10)||0)+(parseInt(s(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(s(t).css("borderTopWidth"),10)||0)+(parseInt(s(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(s(t).css("borderLeftWidth"),10)||0)-(parseInt(s(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(s(t).css("borderTopWidth"),10)||0)-(parseInt(s(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);
return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*i}},_generatePosition:function(t){var e,i,s=this.options,r=t.pageX,o=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-s.grid[1]:e+s.grid[1]:e,i=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||s.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<s.length;n++)s[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(t,e,i){this.overrided(t,e,i)===!1&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||s([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}});return r.register(l,"sortable"),l}),define("skylark-jqueryui-interact/main",["./ddmanager","./Draggable","./Droppable","./Mouse","./Resizable","./Selectable","./Sortable"],function(t,e,i,n,s,r,o){return{ddmanager:t,Draggable:e,Droppable:i,Mouse:n,Resizable:s,Selectable:r,Sortable:o}}),define("skylark-jqueryui-interact",["skylark-jqueryui-interact/main"],function(t){return t})},this);
//# sourceMappingURL=sourcemaps/skylark-jqueryui-interact-all.js.map
